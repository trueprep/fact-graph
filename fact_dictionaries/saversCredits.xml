<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/maxIncomeLimitForMFJ">
      <Description>max income before becoming ineligible as MFJ
        IRS notice 2023-75, adjusted limitation under
        25B(b)(1)(C) and 25B(b)(1)(D)
      </Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>76500</Dollar>
      </Derived>
    </Fact>

    <Fact path="/maxIncomeLimitForHOH">
      <Description>max income before becoming ineligible as HoH
        IRS notice 2023-75, adjusted limitation under
        25B(b)(1)(C) and 25B(b)(1)(D)
      </Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>57375</Dollar>
      </Derived>
    </Fact>

    <Fact path="/maxIncomeLimitForOther">
      <Description>max income before becoming ineligible as other filing statuses (non HoH or MFJ)
        IRS notice 2023-75,
        adjusted limitation under 25B(b)(1)(C) and 25B(b)(1)(D)
      </Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>38250</Dollar>
      </Derived>
    </Fact>

    <Fact path="/saversCreditMaxAgiLimit">
      <Description>Maximum AGI before becoming ineligible for the Saver's Credit</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            </When>
            <Then>
              <Dependency path="/maxIncomeLimitForMFJ"></Dependency>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusHOH" />
            </When>
            <Then>
              <Dependency path="/maxIncomeLimitForHOH"></Dependency>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dependency path="/maxIncomeLimitForOther"></Dependency>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/saversCreditAgiLimitForFiftyPercent">
      <Description>Maximum income at which the applicable percentage is 50%
        IRS notice 2023-75, adjusted limitation under
        25B(b)(1)(A)
      </Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            </When>
            <Then>
              <Dollar>46000</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusHOH" />
            </When>
            <Then>
              <Dollar>34500</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>23000</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/saversCreditAgiLimitForTwentyPercent">
      <Description>Maximum income at which the applicable percentage is 20%
        IRS notice 2023-75, adjusted limitation under
        25B(b)(1)(B)
      </Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            </When>
            <Then>
              <Dollar>50000</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusHOH" />
            </When>
            <Then>
              <Dollar>37500</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>25000</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isHohAgiEligibleForSaversCredit">
      <Description>Is HoH AGI eligible for savers credit</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusHOH" />
          <LessThanOrEqual>
            <Left>
              <Dependency module="taxCalculations" path="/agi" />
            </Left>
            <Right>
              <Dependency path="/maxIncomeLimitForHOH" />
            </Right>
          </LessThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isMfjAgiEligibleForSaversCredit">
      <Description>Is MFJ AGI eligible for savers credit</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <LessThanOrEqual>
            <Left>
              <Dependency module="taxCalculations" path="/agi" />
            </Left>
            <Right>
              <Dependency path="/maxIncomeLimitForMFJ" />
            </Right>
          </LessThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOtherAgiEligibleForSaversCredit">
      <Description>Is other (not HoH or MFJ) AGI eligible for savers credit</Description>

      <Derived>
        <All>
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusHOH" />
          </Not>
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
          <LessThanOrEqual>
            <Left>
              <Dependency module="taxCalculations" path="/agi" />
            </Left>
            <Right>
              <Dependency path="/maxIncomeLimitForOther" />
            </Right>
          </LessThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isAgiEligibleForSaversCredit">
      <Description>Is AGI eligible for Savers Credit</Description>

      <Derived>
        <Any>
          <Dependency path="/isHohAgiEligibleForSaversCredit" />
          <Dependency path="/isMfjAgiEligibleForSaversCredit" />
          <Dependency path="/isOtherAgiEligibleForSaversCredit" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/eligibleForSaversCredit">
      <Description>Whether the TP(s) are eligible for the Saver's credit</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Not>
            <!-- We ban an MFJ dependent here, as they have opted not to take credits. -->
            <Dependency module="filers" path="/isMFJDependent" />
          </Not>
          <Switch>
            <Case>
              <When>
                <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
              </When>
              <Then>
                <Any>
                  <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
                  <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
                </Any>
              </Then>
            </Case>
            <Case>
              <When>
                <True />
              </When>
              <Then>
                <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
              </Then>
            </Case>
          </Switch>
          <Dependency path="/isAgiEligibleForSaversCredit" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/onlyPrimaryFilerEligibleForSaversCredit">
      <Description>Is the primary taxpayer the only taxpayer eligible?</Description>

      <Derived>
        <All>
          <Dependency path="/eligibleForSaversCredit" />
          <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
          <Any>
            <Not>
              <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            </Not>
            <Not>
              <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
            </Not>
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/onlySecondaryFilerEligibleForSaversCredit">
      <Description>Is the secondary taxpayer the only taxpayer eligible?</Description>

      <Derived>
        <All>
          <Dependency path="/eligibleForSaversCredit" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
          <Not>
            <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/bothFilersEligibleForSaversCredit">
      <Description>Are both taxpayers eligible?</Description>

      <Derived>
        <All>
          <Dependency path="/eligibleForSaversCredit" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
          <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/saversCreditMultiplierOptions">
      <Description>Enum for the decimal multiplier used on Form 8880, line 9</Description>
      <Derived>
        <EnumOptions>
          <String>fifty</String>
          <String>twenty</String>
          <String>ten</String>
          <String>zero</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/pdfSaversCreditMultiplierAsInt">
      <Description>The savers credit multiplier as an int, used for the PDF output for Form 8880, line 9</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">fifty</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Int>5</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">twenty</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Int>2</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">ten</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Int>1</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Int>0</Int>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/saversCreditMultiplierAsRational">
      <Description>The savers credit multiplier as a rational number so that we can multiply it for Form 8880 line 10
        calculations</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">fifty</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Rational>5/10</Rational>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">twenty</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Rational>2/10</Rational>
            </Then>
          </Case>
          <Case>
            <When>
              <Equal>
                <Left>
                  <Dependency path="/saversCreditMultiplier" />
                </Left>
                <Right>
                  <Enum optionsPath="/saversCreditMultiplierOptions">ten</Enum>
                </Right>
              </Equal>
            </When>
            <Then>
              <Rational>1/10</Rational>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Rational>0/10</Rational>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/saversCreditMultiplier">
      <Description>Mulitiplier used on Form 8880, line 9</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency module="taxCalculations" path="/agi" />
                </Left>
                <Right>
                  <Dependency path="/saversCreditAgiLimitForFiftyPercent"></Dependency>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Enum optionsPath="/saversCreditMultiplierOptions">fifty</Enum>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency module="taxCalculations" path="/agi" />
                </Left>
                <Right>
                  <Dependency path="/saversCreditAgiLimitForTwentyPercent"></Dependency>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Enum optionsPath="/saversCreditMultiplierOptions">twenty</Enum>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency module="taxCalculations" path="/agi" />
                </Left>
                <Right>
                  <Dependency path="/saversCreditMaxAgiLimit" />
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Enum optionsPath="/saversCreditMultiplierOptions">ten</Enum>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Enum optionsPath="/saversCreditMultiplierOptions">zero</Enum>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerIsEligibleForSaversCredit">
      <Description>Whether the secondary filer is actually applicable and eligible for the saver's credit</Description>
      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/unfilteredPrimaryFilerIraAndAbleContributions">
      <Description>Total IRA and ABLE account contributions for the primary filer, not filtered by eligibility</Description>
      <Derived>
        <!-- Implement when we support this, placeholder for now -->
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerIraAndAbleContributions">
      <Description>Total IRA and ABLE account contributions for the primary filer, used in Form 8880 Line 1a</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
            </When>
            <Then>
              <Dependency path="/unfilteredPrimaryFilerIraAndAbleContributions"></Dependency>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/unfilteredSecondaryFilerIraAndAbleContributions">
      <Description>Total IRA and ABLE account contributions for the secondary filer, not filtered by eligibility</Description>
      <Derived>
        <!-- Implement when we support this, placeholder for now -->
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerIraAndAbleContributions">
      <Description>Total IRA and ABLE account contributions for the secondary filer, used in Form 8880 Line 1b</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/secondaryFilerIsEligibleForSaversCredit" />
            </When>
            <Then>
              <Dependency path="/unfilteredSecondaryFilerIraAndAbleContributions" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/unfilteredPrimaryFilersDeferralsAndContributions">
      <Description>The total sum of deferrals and contributions for the Primary TP, not conditional on eligibility</Description>
      <Derived>
        <Round>
          <CollectionSum>
            <Dependency module="formW2s" path="/primaryFilerW2s/*/totalDeferralsAndContributions" />
          </CollectionSum>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/primaryFilersDeferralsAndContributions">
      <Description>The total sum of deferrals and contributions for the Primary TP, used on Line 2a of Form 8880</Description>
      <Export mef="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
            </When>
            <Then>
              <Dependency path="/unfilteredPrimaryFilersDeferralsAndContributions" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/unfilteredSecondaryFilersDeferralsAndContributions">
      <Description>The total sum of deferrals and contributions for the secondary TP, not conditional on eligibility</Description>
      <Derived>
        <Round>
          <CollectionSum>
            <Dependency module="formW2s" path="/secondaryFilerW2s/*/totalDeferralsAndContributions" />
          </CollectionSum>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilersDeferralsAndContributions">
      <Description>The total sum of deferrals and contributions for the secondary TP, used on Line 2b of Form 8880</Description>
      <Export mef="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/secondaryFilerIsEligibleForSaversCredit" />
            </When>
            <Then>
              <Dependency path="/unfilteredSecondaryFilersDeferralsAndContributions" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerUnfilteredTotalContributions">
      <Description>Primary Filers total contributions not based on eligibility</Description>
      <Derived>
        <Add>
          <Dependency path="/unfilteredPrimaryFilersDeferralsAndContributions" />
          <Dependency path="/unfilteredPrimaryFilerIraAndAbleContributions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerUnfilteredTotalContributions">
      <Description>Secondary filers total contributions not based on eligibility</Description>
      <Derived>
        <Add>
          <Dependency path="/unfilteredSecondaryFilersDeferralsAndContributions" />
          <Dependency path="/unfilteredSecondaryFilerIraAndAbleContributions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerTotalContributions">
      <Description>Used for Form 8880 Line 3a, summation of line 1a and 2a</Description>
      <Export mef="true" />
      <Derived>
        <Add>
          <Dependency path="/primaryFilerIraAndAbleContributions" />
          <Dependency path="/primaryFilersDeferralsAndContributions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerTotalContributions">
      <Description>Used for Form 8880 Line 3b, summation of line 1b and 2b</Description>
      <Export mef="true" />
      <Derived>
        <Add>
          <Dependency path="/secondaryFilerIraAndAbleContributions" />
          <Dependency path="/secondaryFilersDeferralsAndContributions" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerTotalContributionsLessDistributions">
      <Description>The total contributions by the primary filer minus the distributions, used on Form 8880 Line 5a</Description>
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency path="/primaryFilerTotalContributions" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/primaryFilerGrossDistributions" />
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/submittedPrimaryFilerTotalContributionsLessDistributions">
      <Description>Copy of /primaryFilerTotalContributionsLessDistributions but modified to be used specifically for
        MeF/PDF to provide the incomplete value when the primary filer is not eligible or doesn't have eligible
        contributions</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <Dependency path="/primaryFilerTotalContributions" />
                </Left>
                <Right>
                  <Dollar>0</Dollar>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerTotalContributionsLessDistributions">
      <Description>The total contributions by the secondary filer minus the distributions, used on Form 8880 Line 5b</Description>
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency path="/secondaryFilerTotalContributions" />
            </Minuend>
            <Subtrahends>
              <Dependency path="/secondaryFilerGrossDistributions" />
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/submittedSecondaryFilerTotalContributionsLessDistributions">
      <Description>Copy of /secondaryFilerTotalContributionsLessDistributions but modified to be used specifically for
        MeF/PDF to provide the incomplete value when spouse is not eligible or doesn't have eligible contributions</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <Dependency path="/secondaryFilerTotalContributions" />
                </Left>
                <Right>
                  <Dollar>0</Dollar>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerSaversEligibleGrossDistributions">
      <Description>The primary filers distributions that are eligible to be included in the savers credit (before
        accounting for filing status additions).</Description>

      <Derived>
        <Round>
          <Switch>
            <Case>
              <When>
                <All>
                  <IsComplete>
                    <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
                  </IsComplete>
                  <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
                  <!-- This is incase the 1099R collection wasn't initialized -->
                  <IsComplete>
                    <Dependency module="form1099Rs" path="/primaryFiler1099RsReportedOnSaversCredit" />
                  </IsComplete>
                </All>
              </When>
              <Then>
                <CollectionSum>
                  <Dependency module="form1099Rs"
                    path="/primaryFiler1099RsReportedOnSaversCredit/*/box1GrossDistribution" />
                </CollectionSum>
              </Then>
            </Case>
            <Case>
              <When>
                <True />
              </When>
              <Then>
                <Dollar>0</Dollar>
              </Then>
            </Case>
          </Switch>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerGrossDistributions">
      <Description>Form 8880: line 4a the total of certain primary filer distributions according to the form
        instructions. If MFJ, both secondary and primary distributions are added and the same for both line 5a and b
        unless the primary filer is not eligible.
        Defaulted to 0 when not eligible</Description>
      <Export mef="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
                <IsComplete>
                  <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
                </IsComplete>
                <Dependency module="filers" path="/primaryFiler/isEligibleForSaversCredit" />
              </All>
            </When>
            <Then>
              <Add>
                <Dependency path="/primaryFilerSaversEligibleGrossDistributions" />
                <Dependency path="/secondaryFilerSaversEligibleGrossDistributions" />
              </Add>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dependency path="/primaryFilerSaversEligibleGrossDistributions" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerSaversEligibleGrossDistributions">
      <Description>The secondary filers distributions that are eligible to be included in the savers credit (before
        accounting for filing status additions).</Description>

      <Derived>
        <Round>
          <Switch>
            <Case>
              <When>
                <All>
                  <IsComplete>
                    <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
                  </IsComplete>
                  <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
                  <!-- This is incase the 1099R collection wasn't initialized -->
                  <IsComplete>
                    <Dependency module="form1099Rs" path="/secondaryFiler1099RsReportedOnSaversCredit" />
                  </IsComplete>
                </All>
              </When>
              <Then>
                <CollectionSum>
                  <Dependency module="form1099Rs"
                    path="/secondaryFiler1099RsReportedOnSaversCredit/*/box1GrossDistribution" />
                </CollectionSum>
              </Then>
            </Case>
            <Case>
              <When>
                <True />
              </When>
              <Then>
                <Dollar>0</Dollar>
              </Then>
            </Case>
          </Switch>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerGrossDistributions">
      <Description>Form 8880: line 4b the total of certain secondary filer distributions according to the form
        instructions. If MFJ, both secondary and primary distributions are added and the same for both line 5a and b
        unless the secondary filer is not eligible. Defaulted to 0 when not eligible.</Description>
      <Export mef="true" />

      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
                <IsComplete>
                  <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
                </IsComplete>
                <Dependency module="filers" path="/secondaryFiler/isEligibleForSaversCredit" />
              </All>
            </When>
            <Then>
              <Add>
                <Dependency path="/primaryFilerSaversEligibleGrossDistributions" />
                <Dependency path="/secondaryFilerSaversEligibleGrossDistributions" />
              </Add>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dependency path="/secondaryFilerSaversEligibleGrossDistributions" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/saversMaxCreditAmountNotMFJ">
      <Description>Max credit possible if not filing MFJ (50% of the max contribution)</Description>
      <Derived>
        <Dollar>1000</Dollar>
      </Derived>
    </Fact>

    <Fact path="/saversMaxCreditLimit">
      <Description>Max credit limit for line 6 on Form 8880</Description>
      <Derived>
        <Dollar>2000</Dollar>
      </Derived>
    </Fact>

    <Fact path="/primaryFilerMaxCreditCalc">
      <Description>Lesser of saversMaxCreditLimit or Line 5a, used on Form 8880 Line 6a</Description>
      <Derived>
        <LesserOf>
          <Dependency path="/saversMaxCreditLimit" />
          <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
        </LesserOf>
      </Derived>
    </Fact>

    <Fact path="/submittedPrimaryFilerMaxCreditCalc">
      <Description>Modification of /primaryFilerMaxCreditCalc, used for MeF/PDF to prevent value when the primary filer
        is not eligible or doesn't have eligible contributions</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <Dependency path="/primaryFilerTotalContributions" />
                </Left>
                <Right>
                  <Dollar>0</Dollar>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <Dependency path="/primaryFilerMaxCreditCalc" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/secondaryFilerMaxCreditCalc">
      <Description>Lesser of saversMaxCreditLimit or Line 5b, used on Form 8880 Line 6b</Description>
      <Derived>
        <LesserOf>
          <Dependency path="/saversMaxCreditLimit" />
          <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
        </LesserOf>
      </Derived>
    </Fact>

    <Fact path="/submittedSecondaryFilerMaxCreditCalc">
      <Description>Modification of /secondaryFilerMaxCreditCalc, used for MeF/PDF to prevent value when the spouse is
        not eligible or doesn't have eligible contributions</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <Dependency path="/secondaryFilerTotalContributions" />
                </Left>
                <Right>
                  <Dollar>0</Dollar>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <Dependency path="/secondaryFilerMaxCreditCalc" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/combinedCreditLimit">
      <Description>used on Form 8880 Line 7</Description>
      <Export mef="true" />
      <Derived>
        <Add>
          <Dependency path="/primaryFilerMaxCreditCalc" />
          <Dependency path="/secondaryFilerMaxCreditCalc" />
        </Add>
      </Derived>
    </Fact>

    <Fact path="/ratioedCombinedCreditLimit">
      <Description>the multiplier times the combinedCreditLimit, used for Form 8880 Line 10</Description>
      <Export mef="true" />
      <Derived>
        <Round>
          <Multiply>
            <Dependency path="/saversCreditMultiplierAsRational" />
            <Dependency path="/combinedCreditLimit" />
          </Multiply>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/meetsOneDollarCombinedCreditLimit">
      <Description>The combined credit limit is $1 and ratioed limit is $0</Description>
      <Derived>
        <All>
          <Equal>
            <Left>
              <Dependency path="/combinedCreditLimit" />
            </Left>
            <Right>
              <Dollar>1</Dollar>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="/ratioedCombinedCreditLimit" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/limitationBasedOnTaxLiability">
      <Description>Limitation based on tax liability (Credit Limit Worksheet) Form 8880 Line 11</Description>
      <Export mef="true" />
      <Derived>
        <GreaterOf>
          <Subtract>
            <Minuend>
              <Dependency module="taxCalculations" path="/totalTentativeTax" />
            </Minuend>
            <Subtrahends>
              <Add>
                <Dependency module="schedule3" path="/sched3Line1" />
                <Dependency module="cdcc" path="/cdccTotalCredit" />
                <Dependency module="schedule3" path="/sched3Line3" />
                <Dependency module="elderlyAndDisabled" path="/totalEdc" />
                <Dependency module="schedule3" path="/sched3Line6l" />
              </Add>
            </Subtrahends>
          </Subtract>
          <Dollar>0</Dollar>
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/qualifiedSaverCreditAmount">
      <Description>The amount the TP qualifies for, Form 8880 Line 12 and propagates to Form 1040 Schedule 3, Line 4</Description>
      <Export mef="true" downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/qualifiedForSaverCredit" />
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/ratioedCombinedCreditLimit"></Dependency>
                <Dependency path="/limitationBasedOnTaxLiability"></Dependency>
              </LesserOf>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isReceivingSaversCredit">
      <Description>Whether the amount of the credit is greater than $0</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <GreaterThan>
          <Left>
            <Dependency path="/qualifiedSaverCreditAmount" />
          </Left>
          <Right>
            <Dollar>0</Dollar>
          </Right>
        </GreaterThan>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForSaverCreditWoTaxLiability">
      <Description>Eligible and qualified for savers credit</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/eligibleForSaversCredit" />
          <GreaterThan>
            <Left>
              <Dependency path="/combinedCreditLimit" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForSaverCredit">
      <Description>Eligible and qualified for savers credit</Description>
      <Export mef="true" downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/qualifiedForSaverCreditWoTaxLiability" />
          <GreaterThan>
            <Left>
              <Dependency path="/limitationBasedOnTaxLiability"></Dependency>
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/singleFilerQualifiedForSaversCredit">
      <Description>Is the primary taxpayer the only taxpayer qualified?</Description>

      <Derived>
        <All>
          <Dependency path="/qualifiedForSaverCredit" />
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/onlyPrimaryFilerQualifiedForSaversCredit">
      <Description>Is the primary taxpayer the only taxpayer qualified?</Description>

      <Derived>
        <All>
          <Dependency path="/qualifiedForSaverCredit" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Equal>
            <Left>
              <!-- $0 if filer is not eligible or hasn't made contributions -->
              <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/onlySecondaryFilerQualifiedForSaversCredit">
      <Description>Is the secondary taxpayer the only taxpayer qualified?</Description>

      <Derived>
        <All>
          <Dependency path="/qualifiedForSaverCredit" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Equal>
            <Left>
              <!-- $0 if filer is not eligible or hasn't made contributions -->
              <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/bothFilersQualifiedForSaversCredit">
      <Description>Are both taxpayers qualified?</Description>

      <Derived>
        <All>
          <Dependency path="/qualifiedForSaverCredit" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency path="/onlyPrimaryFilerQualifiedForSaversCredit" />
          </Not>
          <Not>
            <Dependency path="/onlySecondaryFilerQualifiedForSaversCredit" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/didPrimaryMakeEligibleContributions">
      <Description>Did the primary TP make eligible contributions</Description>

      <Derived>
        <GreaterThan>
          <Left>
            <Dependency path="/primaryFilerUnfilteredTotalContributions" />
          </Left>
          <Right>
            <Dollar>0</Dollar>
          </Right>
        </GreaterThan>
      </Derived>
    </Fact>

    <Fact path="/didSecondaryMakeEligibleContributions">
      <Description>Did the secondary TP make eligible contributions</Description>

      <Derived>
        <GreaterThan>
          <Left>
            <Dependency path="/secondaryFilerUnfilteredTotalContributions" />
          </Left>
          <Right>
            <Dollar>0</Dollar>
          </Right>
        </GreaterThan>
      </Derived>
    </Fact>

    <Fact path="/didSingleFilerMakeEligibleContributions">
      <Description>Did the primary taxpayer (of a non-MFJ return) make Saver's Credit eligible contributions?</Description>

      <Derived>
        <All>
          <Dependency path="/didPrimaryMakeEligibleContributions" />
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/didOnlyPrimaryMakeEligibleContributions">
      <Description>Was the primary taxpayer (of an MFJ return) the only filer to make Saver's Credit eligible
        contributions?</Description>

      <Derived>
        <All>
          <Dependency path="/didPrimaryMakeEligibleContributions" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency path="/didSecondaryMakeEligibleContributions" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/didOnlySecondaryMakeEligibleContributions">
      <Description>Was the secondary taxpayer (of an MFJ return) the only filer to make Saver's Credit eligible
        contributions?</Description>

      <Derived>
        <All>
          <Dependency path="/didSecondaryMakeEligibleContributions" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency path="/didPrimaryMakeEligibleContributions" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/didNeitherFilerMakeEligibleContributions">
      <Description>Did neither filer (of an MFJ return) make Saver's Credit eligible contributions?</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency path="/didPrimaryMakeEligibleContributions" />
          </Not>
          <Not>
            <Dependency path="/didSecondaryMakeEligibleContributions" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/nameOfOnlyQualifier">
      <Description>Name of person when only one person qualifies for the credit, may be undefined</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <GreaterThan>
                  <Left>
                    <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
                  </Left>
                  <Right>
                    <Dollar>0</Dollar>
                  </Right>
                </GreaterThan>
                <Equal>
                  <Left>
                    <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
                  </Left>
                  <Right>
                    <Dollar>0</Dollar>
                  </Right>
                </Equal>
              </All>
            </When>
            <Then>
              <Dependency module="filers" path="/primaryFiler/firstName" />
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <GreaterThan>
                  <Left>
                    <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
                  </Left>
                  <Right>
                    <Dollar>0</Dollar>
                  </Right>
                </GreaterThan>
                <Equal>
                  <Left>
                    <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
                  </Left>
                  <Right>
                    <Dollar>0</Dollar>
                  </Right>
                </Equal>
              </All>
            </When>
            <Then>
              <Dependency module="filers" path="/secondaryFiler/firstName" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/hasDistributionsInLastThreeYears">
      <Description>Did primary or secondary have any distributions in the last 3 years</Description>
      <Export downstreamFacts="true" />
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasCurrentYearDistributions">
      <Description>Will the primary or secondary have any distributions prior to the extension deadline?</Description>
      <Export downstreamFacts="true" />
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasSelfReportedContributions">
      <Description>Did primary or secondary have any self-reported contributions</Description>
      <Export downstreamFacts="true" />
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasSelfReportedDistributions">
      <Description>Did primary or secondary have any self-reported distributions</Description>

      <Derived>
        <Any>
          <Dependency path="/hasDistributionsInLastThreeYears" />
          <Dependency path="/hasCurrentYearDistributions" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/flowShowSaversEligibleScreen">
      <Description>Whether the TP had contributions / distributions and didn't have a zero credit value</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/hasSelfReportedDistributionsOrContributions" />
          </Not>
          <Not>
            <Dependency path="/meetsOneDollarCombinedCreditLimit" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/hasSelfReportedDistributionsOrContributions">
      <Description>Did primary or secondary have any self-reported distributions or contributions</Description>
      <Export downstreamFacts="true" />

      <Derived>
        <Any>
          <Dependency path="/hasSelfReportedDistributions" />
          <Dependency path="/hasSelfReportedContributions" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/isSingleFilerUnderAge">
      <Description>Is the primary taxpayer (of a non-MFJ return) under 18?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/isUnder18" />
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlyPrimaryFilerUnderAge">
      <Description>Is the primary taxpayer (of an MFJ return) the only filer under 18?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/isUnder18" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/secondaryFiler/isUnder18" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlySecondaryFilerUnderAge">
      <Description>Is the secondary taxpayer (of an MFJ return) the only filer under 18?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/secondaryFiler/isUnder18" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/primaryFiler/isUnder18" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/areBothFilersUnderAge">
      <Description>Are both taxpayers (of an MFJ return) under 18?</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/primaryFiler/isUnder18" />
          <Dependency module="filers" path="/secondaryFiler/isUnder18" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/willSingleFilerBeClaimedAsDependent">
      <Description>Will the primary taxpayer (of a non-MFJ return) be claimed as a dependent on a different return?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/willBeClaimed" />
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/willOnlyPrimaryFilerBeClaimedAsDependent">
      <Description>Will the primary taxpayer (of an MFJ return) be claimed as a dependent on a different return?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/willBeClaimed" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/secondaryFiler/willBeClaimed" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/willOnlySecondaryFilerBeClaimedAsDependent">
      <Description>Will the secondary taxpayer (of an MFJ return) be claimed as a dependent on a different return?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/secondaryFiler/willBeClaimed" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/primaryFiler/willBeClaimed" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/willBothFilersBeClaimedAsDependents">
      <Description>Will both filers be claimed as dependents on another tax return?</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/primaryFiler/willBeClaimed" />
          <Dependency module="filers" path="/secondaryFiler/willBeClaimed" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/isSingleFilerFullTimeStudent">
      <Description>Is the primary filer (of a non-MFJ return) the only filer that was a full-time student?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/isStudent" />
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlyPrimaryFilerFullTimeStudent">
      <Description>Is the primary filer (of an MFJ return) the only filer that was a full-time student?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFiler/isStudent" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/secondaryFiler/isStudent" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlySecondaryFilerFullTimeStudent">
      <Description>Is the secondary filer (of an MFJ return) the only filer that was a full-time student?</Description>

      <Derived>
        <All>
          <Dependency module="filers" path="/secondaryFiler/isStudent" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Dependency module="filers" path="/primaryFiler/isStudent" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/areBothFilersFullTimeStudents">
      <Description>Are both filers full-time students?</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Dependency module="filers" path="/primaryFiler/isStudent" />
          <Dependency module="filers" path="/secondaryFiler/isStudent" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/isSingleFilerFailsDistributionsTest">
      <Description>Is the primary filer (of a non-MFJ return) the only filer that has distributions exceeding
        contributions?</Description>

      <Derived>
        <All>
          <Equal>
            <Left>
              <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
          <Not>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlyPrimaryFilerFailsDistributionsTest">
      <Description>Is the primary filer (of an MFJ return) the only filer that has distributions exceeding
        contributions?</Description>

      <Derived>
        <All>
          <Equal>
            <Left>
              <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Equal>
              <Left>
                <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
              </Left>
              <Right>
                <Dollar>0</Dollar>
              </Right>
            </Equal>
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/isOnlySecondaryFilerFailsDistributionsTest">
      <Description>Is the secondary filer (of an MFJ return) the only filer that that has distributions exceeding
        contributions?</Description>

      <Derived>
        <All>
          <Equal>
            <Left>
              <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Not>
            <Equal>
              <Left>
                <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
              </Left>
              <Right>
                <Dollar>0</Dollar>
              </Right>
            </Equal>
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/areBothFilersFailDistributionsTest">
      <Description>Are both filers have distributions exceeding contributions?</Description>

      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
          <Equal>
            <Left>
              <Dependency path="/primaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="/secondaryFilerTotalContributionsLessDistributions" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

  </Facts>
</FactDictionaryModule>
