<?xml-model href="./FactDictionaryModule.rng"?>
<FactDictionaryModule>
  <Facts>
    <Fact path="/mayNeedToFileForm8962">
      <Description>Whether TP may potentially need to file Form 8962</Description>
      <Derived>
        <All>
          <GreaterThanOrEqual>
            <Left>
              <CollectionSize>
                <Filter path="/1095As">
                  <Dependency path="hasCoverageMonthsOrAptc" />
                </Filter>
              </CollectionSize>
            </Left>
            <Right>
              <Int>1</Int>
            </Right>
          </GreaterThanOrEqual>
          <Dependency path="/maybeEligibleForPtc" />
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency path="/applicableTaxPayerOrHasAptc" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/needsToFileForm8962">
      <Description>Whether TP need to file Form 8962</Description>
      <!-- Currently just exists as a placeholder wrapping fact, and could be deleted -->
      <Export mef="true" downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/mayNeedToFileForm8962" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/maybeEligibleForPtc">
      <Description>Maybe eligible for PTC based on dependence status</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <Not>
          <All>
            <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            <Dependency module="filers" path="/isMFJDependent" />
          </All>
        </Not>
      </Derived>
    </Fact>

    <Fact path="/ptcSectionIsComplete">
      <Description>PTC section is complete</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Any>
            <Not>
              <Dependency path="/maybeEligibleForPtc" />
            </Not>
            <Dependency path="/dependentTpForm8962NotNeeded" />
            <Dependency path="/ptcNotQualifiedNoAptc" />
            <All>
              <Dependency path="/applicableTaxPayerOrHasAptc" />
              <!-- Ensures that we ask immigration status eligibility question when applicable -->
              <Any>
                <Not>
                  <IsComplete>
                    <Dependency path="/mayPotentiallyHaveTaxFamilyWithNonEligibleImmigrationStatus" />
                  </IsComplete>
                </Not>
                <Not>
                  <Dependency path="/mayPotentiallyHaveTaxFamilyWithNonEligibleImmigrationStatus" />
                </Not>
                <IsComplete>
                  <Dependency path="/writableHasImmigrationStatusNotEligibleForMarketplace" />
                </IsComplete>
              </Any>
              <Dependency path="/1095AsIsDone" />
              <Any>
                <Dependency path="/ptcNotQualifiedHasAptc" />
                <All>
                  <Dependency path="/qualifiedForPtc" />
                  <IsComplete>
                    <Dependency path="/netPtcAmount" />
                  </IsComplete>
                </All>
              </Any>
            </All>
          </Any>
          <Dependency path="/uniqueCircumstancesIsComplete" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/uniqueCircumstancesIsComplete">
      <Description>Fact to ensure unique circumstances section is complete</Description>
      <Derived>
        <!-- Hack to enforce answering unique-circumstance should they be required through edit scenarios -->
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/hasPtcQualifyingPlan" /> <!-- This internally checks /maybeEligibleForPtc -->
                <Not>
                  <Dependency path="/filerNotQualifiedForPtcBecauseOfStatusAndResidenceInfo" />
                </Not>
              </All>
            </When>
            <Then>
              <All>
                <!-- handle mfs-exception-check -->
                <Switch>
                  <Case>
                    <When>
                      <All>
                        <IsComplete>
                          <Dependency path="/isMFSAndCantBeClaimed" />
                        </IsComplete>
                        <Dependency path="/isMFSAndCantBeClaimed" />
                      </All>
                    </When>
                    <Then>
                      <IsComplete>
                        <Dependency path="/writableHasMfsException" />
                      </IsComplete>
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <True />
                    </Then>
                  </Case>
                </Switch>

                <!-- handle mfs-exception-past-use -->
                <Switch>
                  <Case>
                    <When>
                      <All>
                        <IsComplete>
                          <Dependency path="/hasMfsException" />
                        </IsComplete>
                        <Dependency path="/hasMfsException" />
                      </All>
                    </When>
                    <Then>
                      <IsComplete>
                        <Dependency path="/writableClaimingMfsExceptionForFourthStraightYear" />
                      </IsComplete>
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <True />
                    </Then>
                  </Case>
                </Switch>

                <!-- handle below-100-medicaid -->
                <Switch>
                  <Case>
                    <When>
                      <All>
                        <IsComplete>
                          <Dependency path="/maybeApplicableTpAndNoAptcAndBelow100PovertyThreshold" />
                        </IsComplete>
                        <Dependency path="/maybeApplicableTpAndNoAptcAndBelow100PovertyThreshold" />
                      </All>
                    </When>
                    <Then>
                      <IsComplete>
                        <Dependency
                          path="/writableBelow100ThresholdAndNotEligibleForMedicaidBecauseOfImmigrationStatus" />
                      </IsComplete>
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <True />
                    </Then>
                  </Case>
                </Switch>
              </All>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <True />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/dependentTpSelfEnrolled">
      <Description>Whether the dependent TP self enrolled in a marketplace health plan</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/dependentTpEnrolledSomeoneElse">
      <Description>Whether the dependent TP enrolled someone else in a marketplace health plan</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/writableDependentTpOtherMembersArePartOfDifferentTaxFamily">
      <Description>(writable)Whether the other person the dependent tax payer enrolled is part of a different tax family</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/dependentTpOtherMembersArePartOfDifferentTaxFamily">
      <Description>Whether the other person the dependent tax payer enrolled is part of a different tax family</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/dependentTpEnrolledSomeoneElse " />
            </When>
            <Then>
              <Dependency path="/writableDependentTpOtherMembersArePartOfDifferentTaxFamily " />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/dependentTpRequiresAllocations">
      <Description>Scenarios(requires allocations) we don't support for dependent taxpayers</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          <Dependency path="/dependentTpSelfEnrolled" />
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <IsComplete>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </IsComplete>
          <Any>
            <Dependency path="/claimedAndNotPartOfDifferentTaxFamily" />
            <Dependency path="/notClaimedAndPartOfDifferentTaxFamily" />
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/claimedAndNotPartOfDifferentTaxFamily">
      <Description>TP is being claimed and someone else enrolled is not part of a different tax family</Description>
      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          <Not>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/notClaimedAndPartOfDifferentTaxFamily">
      <Description>TP is not being claimed and someone else enrolled is part of different tax family</Description>
      <Derived>
        <All>
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/dependentTpForm8962NotNeeded">
      <Description>If the dependent tp should see the non needed screen</Description>
      <Derived>
        <All>
          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          <Any>
            <Dependency path="/ptcDependentTpDidNotEnrollSelfOrOthers" />
            <Dependency path="/ptcDependentTpIsClaimedDidEnrollSelfAndNotOthers" />
            <Dependency path="/ptcDependentTpIsClaimedDidEnrollSelfAndOthersAndPartOfDifferentTaxFamily" />
            <Dependency path="/ptcDependentTpDidNotEnrollSelfAndEnrolledOthersWhoIsPartOfDifferentTaxFamily" />
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/eitherDependentTpForm8962NotNeededOrNotQualifiedNoAptc">
      <Description>either dependentTpForm8962NotNeeded OR ptcNotQualifiedNoAptc</Description>
      <Derived>
        <Any>
          <Dependency path="/dependentTpForm8962NotNeeded" />
          <Dependency path="/ptcNotQualifiedNoAptc" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/ptcNotClaimedDependentTpWhoOnlyEnrolledSelf">
      <Description>TP who is not being claimed, but could be, and only enrolled themselves </Description>
      <Derived>
        <All>
          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Dependency path="/dependentTpSelfEnrolled" />
          <Not>
            <Dependency path="/dependentTpEnrolledSomeoneElse" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcNotClaimedDependentTpWhoOnlyEnrolledSomeoneElseNotPartOfDiffTaxFam">
      <Description>TP who is not being claimed, but could be, and only enrolled someone else who is not part of a
        different tax family</Description>
      <Derived>
        <All>
          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Not>
            <Dependency path="/dependentTpSelfEnrolled" />
          </Not>
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Not>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcNotClaimedDependentTpWhoEnrolledSelfAndSomeoneElseNotPartOfDiffTaxFam">
      <Description>TP who is not being claimed, but could be, and enrolled themselves and someone else who is not part
        of a different tax family</Description>
      <Derived>
        <All>
          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Dependency path="/dependentTpSelfEnrolled" />
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Not>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpDidNotEnrollSelfOrOthers">
      <Description>Dependent TP did not enroll self and didn't enroll someone else</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/dependentTpSelfEnrolled" />
          </Not>
          <Not>
            <Dependency path="/dependentTpEnrolledSomeoneElse" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpIsClaimedDidEnrollSelfAndNotOthers">
      <Description>Dependent TP enrolled self and didn't enroll anyone else and is being claimed</Description>
      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          <Dependency path="/dependentTpSelfEnrolled" />
          <Not>
            <Dependency path="/dependentTpEnrolledSomeoneElse" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpIsClaimedDidEnrollSelfAndOthersAndPartOfDifferentTaxFamily">
      <Description>Dependent TP is claimed, did enroll self and someone else and someone is part of different tax family</Description>
      <Derived>
        <All>
          <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          <Dependency path="/dependentTpSelfEnrolled" />
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpDidNotEnrollSelfAndEnrolledOthersWhoIsPartOfDifferentTaxFamily">
      <Description>Dependent TP did not enroll self, enrolled someone else and they are part of different tax family</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/dependentTpSelfEnrolled" />
          </Not>
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/dependentTpNeedToCollectMoreInfo">
      <Description>They have answered some basic quesitons about their tax family and we still need to collect more
        information</Description>
      <Derived>
        <Any>
          <Dependency path="/ptcDependentTpNotClaimedAndOnlyEnrolledSelf" />
          <Dependency path="/ptcDependentTpOnlyEnrolledOthersAndNotPartOfDifferentTaxFamily" />
          <Dependency path="/ptcDependentTpNotClaimedEnrolledSelfAndOthersNotPartOfDifferentTaxFamily" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpNotClaimedAndOnlyEnrolledSelf">
      <Description>Dependent TP is not claimed and only enrolled self</Description>
      <Derived>
        <All>
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Dependency path="/dependentTpSelfEnrolled" />
          <Not>
            <Dependency path="/dependentTpEnrolledSomeoneElse" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpOnlyEnrolledOthersAndNotPartOfDifferentTaxFamily">
      <Description>Dependent TP that only enrolled someone else and they are not part of a different tax family</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/dependentTpSelfEnrolled" />
          </Not>
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Not>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcDependentTpNotClaimedEnrolledSelfAndOthersNotPartOfDifferentTaxFamily">
      <Description>Dependent TP that is not Claimed and enrolled self and someone else and they are not part of
        different tax family</Description>
      <Derived>
        <All>
          <Not>
            <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
          </Not>
          <Dependency path="/dependentTpSelfEnrolled" />
          <Dependency path="/dependentTpEnrolledSomeoneElse" />
          <Not>
            <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableHasPtcQualifyingPlan">
      <Description>(Writable) Whether the TP is enrolled for a qualifying plan for at least one month</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasPtcQualifyingPlan">
      <Description>Whether the TP is enrolled for a qualifying plan for at least one month</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/maybeEligibleForPtc" />
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Dependency module="filers"
                      path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
                  </When>
                  <Then>
                    <Dependency path="/dependentTpNeedToCollectMoreInfo" />
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Dependency path="/writableHasPtcQualifyingPlan" />
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/hasPtcQualifyingPlanAndQsehra">
      <Description>Whether the TP has both a PTC qualifying plan and has FF in their box 12 codes in their W2</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <IsComplete>
            <Dependency path="/hasPtcQualifyingPlan" />
          </IsComplete>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency module="formW2s" path="/hasQsehra" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableDependentsRequiredToFile">
      <Description>(writable)At least one dependent is required to file</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/dependentsRequiredToFile">
      <Description>At least one dependent is required to file</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/hasPtcQualifyingPlan" />
                <GreaterThanOrEqual>
                  <Left>
                    <Dependency module="familyAndHousehold" path="/claimedDependentsCount" />
                  </Left>
                  <Right>
                    <Int>1</Int>
                  </Right>
                </GreaterThanOrEqual>
              </All>
            </When>
            <Then>
              <Dependency path="/writableDependentsRequiredToFile " />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/writableSelfReportedHasMultiple1095As">
      <Description>(writable)TP has multiple 1095-As they need to report</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/selfReportedHasMultiple1095As">
      <Description>TP has multiple 1095-As they need to report</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency path="/writableSelfReportedHasMultiple1095As" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableIsAdditionalPersonInEnrollmentFamily">
      <Description>(Writable) Whether an additional person outside of your tax family is part of the enrollment family</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/isAdditionalPersonInEnrollmentFamily">
      <Description>Whether an additional person outside of your tax family is part of the enrollment family</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/hasPtcQualifyingPlan" />
                <Not>
                  <Dependency module="filers"
                    path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
                </Not>
              </All>
            </When>
            <Then>
              <Dependency path="/writableIsAdditionalPersonInEnrollmentFamily" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/writableIsAdditionalPersonPartofDifferentTaxFamily">
      <Description>(Writable) is additional person also part of a different tax family</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/isAdditionalPersonPartofDifferentTaxFamily">
      <Description>Is additional person also part of a different tax family</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/isAdditionalPersonInEnrollmentFamily" />
            </When>
            <Then>
              <Dependency path="/writableIsAdditionalPersonPartofDifferentTaxFamily" />
            </Then>
          </Case>
          <Case>
            <When>
              <Any>
                <All>
                  <IsComplete>
                    <Dependency path="/isAdditionalPersonInEnrollmentFamily" />
                  </IsComplete>
                  <Not>
                    <Dependency path="/isAdditionalPersonInEnrollmentFamily" />
                  </Not>
                </All>
                <Dependency module="filers"
                  path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
              </Any>
            </When>
            <Then>
              <False />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/writableIsEnrolledWithOtherFamily">
      <Description>(Writable) Is someone in your tax family, also enrolled with other family</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/isEnrolledWithOtherFamily">
      <Description>Is someone in your tax family, also enrolled with other family</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Not>
                <Dependency path="/isAdditionalPersonPartofDifferentTaxFamily" />
              </Not>
            </When>
            <Then>
              <Dependency path="/writableIsEnrolledWithOtherFamily" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/mayPotentiallyHaveTaxFamilyWithNonEligibleImmigrationStatus">
      <Description>Whether the TP is asked if their tax family has anyone that is ineligible for a marketplace plan
        because of their immigration status</Description>
      <Derived>
        <Any>
          <All>
            <Dependency path="/isAdditionalPersonInEnrollmentFamily" />
            <Not>
              <Dependency path="/isEnrolledWithOtherFamily" />
            </Not>
          </All>
          <Not>
            <Dependency module="filers" path="/allEligibleFilersAreUSCitizensOrNationals" />
          </Not>
          <Dependency module="familyAndHousehold" path="/hasClaimedDependents" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/writableHasImmigrationStatusNotEligibleForMarketplace">
      <Description>(writable)Whether someone in tax family has an immigration status that we don't support on DF</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasImmigrationStatusNotEligibleForMarketplace">
      <Description>Whether someone in tax family has an immigration status that we don't support on DF</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency path="/mayPotentiallyHaveTaxFamilyWithNonEligibleImmigrationStatus" />
          <Dependency path="/writableHasImmigrationStatusNotEligibleForMarketplace" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/needsAllocations">
      <Description>Whether allocations are required for PTC/APTC, this is a KO because we don't support this</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <IsComplete>
            <Dependency path="/hasPtcQualifyingPlan" />
          </IsComplete>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Any>
            <Dependency path="/isAdditionalPersonPartofDifferentTaxFamily" />
            <Dependency path="/isEnrolledWithOtherFamily" />
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableHasAdvancedPtc">
      <Description>(Writable) Whether the TP has recieved advaned payments of the PTC</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasAdvancedPtc">
      <Description>Whether the TP has recieved advaned payments of the PTC</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/hasPtcQualifyingPlan" />
            </When>
            <Then>
              <Dependency path="/writableHasAdvancedPtc" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/filerNotQualifiedForPtcBecauseOfStatusAndResidenceInfo">
      <Description>Filer not qualified because of filing status and no APTC</Description>
      <Derived>
        <Any>
          <All>
            <IsComplete>
              <Dependency path="/hasAdvancedPtc" />
            </IsComplete>
            <Dependency module="filingStatus" path="/isFilingStatusHOH" />
            <Dependency module="filers" path="/isMarried" />
            <Not>
              <Dependency module="filers" path="/secondaryFilerResidencyEligibleForMFJ" />
            </Not>
            <Not>
              <Dependency module="filers" path="/livedApartLastSixMonths" />
            </Not>
          </All>
          <All>
            <Not>
              <Dependency path="/hasAdvancedPtc" />
            </Not>
            <Dependency module="filers"
              path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
            <Not>
              <Dependency module="filers" path="/primaryFilerIsClaimedAsDependent" />
            </Not>
            <Any>
              <Dependency path="/dependentTpSelfEnrolled" />
              <All>
                <Dependency path="/dependentTpEnrolledSomeoneElse" />
                <Not>
                  <Dependency path="/dependentTpOtherMembersArePartOfDifferentTaxFamily" />
                </Not>
              </All>
            </Any>
          </All>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtc">
      <Description>qualifed for PTC</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Not>
            <Dependency path="/filerNotQualifiedForPtcBecauseOfStatusAndResidenceInfo" />
          </Not>
          <Dependency path="/potentiallyApplicableTaxPayer" />
          <IsComplete>
            <Dependency path="/ptcHasZeroCoverageMonths" />
          </IsComplete>
          <Not>
            <Dependency path="/ptcHasZeroCoverageMonths" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcNoAptcAndPtcTotalGreaterThanZero">
      <Description>TP qualifies for PTC and has no APTC, and they get a positive credit amount</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Not>
            <Dependency path="/hasAdvancedPtc" />
          </Not>
          <GreaterThan>
            <Left>
              <Dependency path="/totalPtcAmountAllowed" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcNoAptcAndPtcTotalIsZero">
      <Description>TP qualifies for PTC and has no APTC, and they get a credit of zero</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Not>
            <Dependency path="/hasAdvancedPtc" />
          </Not>
          <Equal>
            <Left>
              <Dependency path="/totalPtcAmountAllowed" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcHasAptcAndNetCreditIsZero">
      <Description>TP qualifies for PTC and has APTC, and they get a credit of zero</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Dependency path="/hasAdvancedPtc" />
          <Equal>
            <Left>
              <Dependency path="/netPtcAmount" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcHasAptcAndNetCreditIsPositive">
      <Description>TP qualifies for PTC and has APTC, and they get a positive credit</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Dependency path="/hasAdvancedPtc" />
          <GreaterThan>
            <Left>
              <Dependency path="/netPtcAmount" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcHasAptcAndNetCreditIsNegativeAndRepaymentLimitationIsNotActive">
      <Description>TP qualifies for PTC, has APTC, they get a negative credit, and repayment limitation is not applied</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Dependency path="/hasAdvancedPtc" />
          <Dependency path="/netPtcAmountIsNegative" />
          <Not>
            <Dependency path="/isRepaymentLimitationIsActive" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/qualifiedForPtcHasAptcAndNetCreditIsNegativeAndHasRepaymentLimitation">
      <Description>TP qualifies for PTC, has APTC, they get a negative credit, and repayment limitation applied</Description>
      <Derived>
        <All>
          <Dependency path="/qualifiedForPtc" />
          <Dependency path="/hasAdvancedPtc" />
          <Dependency path="/netPtcAmountIsNegative" />
          <Dependency path="/isRepaymentLimitationIsActive" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/notDisqualifiedBecauseDependentTp">
      <Description>Whether you are not disqualifed because of dependent tp flow</Description>
      <Derived>
        <Any>
          <Not>
            <IsComplete>
              <Dependency path="/dependentTpForm8962NotNeeded" />
            </IsComplete>
          </Not>
          <Not>
            <Dependency path="/dependentTpForm8962NotNeeded" />
          </Not>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/ptcNotQualifiedNoAptc">
      <Description>Whether the TP is not qualified for PTC and doesn't have APTC</Description>
      <Derived>
        <All>
          <Any>
            <Not>
              <Dependency path="/hasPtcQualifyingPlan" />
            </Not>
            <All>
              <Not>
                <Dependency path="/hasAdvancedPtc" />
              </Not>
              <Any>
                <Dependency path="/filerNotQualifiedForPtcBecauseOfStatusAndResidenceInfo" />
                <Dependency path="/notPtcApplicableTaxPayer" />
                <All>
                  <IsComplete>
                    <Dependency path="/ptcHasZeroCoverageMonths" />
                  </IsComplete>
                  <Dependency path="/ptcHasZeroCoverageMonths" />
                </All>
              </Any>
            </All>
          </Any>
          <Dependency path="/notDisqualifiedBecauseDependentTp" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcNotQualifiedHasAptc">
      <Description>Whether the TP is not qualified for PTC and has APTC</Description>
      <Derived>
        <All>
          <Not>
            <Any>
              <Dependency path="/tpNeedsToAdd1095A" />
              <Dependency path="/tpNeedsToDelete1095A" />
            </Any>
          </Not>
          <Dependency path="/hasAdvancedPtc" />
          <Any>
            <Dependency path="/notPtcApplicableTaxPayer" />
            <All>
              <IsComplete>
                <Dependency path="/ptcHasZeroCoverageMonths" />
              </IsComplete>
              <Dependency path="/ptcHasZeroCoverageMonths" />
            </All>
          </Any>
          <Dependency path="/notDisqualifiedBecauseDependentTp" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/hasAtLeastOneComplete1095A">
      <Description>
        Whether the filer has at least one complete 1095-A.
        This is distinct from has1095A because it being
        complete means the filer can mark the collection hub as completed.
      </Description>
      <Derived>
        <All>
          <GreaterThan>
            <Left>
              <Count>
                <Dependency path="/1095As/*/safeIsComplete" />
              </Count>
            </Left>
            <Right>
              <Int>0</Int>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/notApplicableTaxPayerAndHasAptc">
      <Description>Not an applicable tax payer and has APTC</Description>
      <Derived>
        <All>
          <Dependency path="/notPtcApplicableTaxPayer" />
          <Dependency path="/hasAdvancedPtc" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/tpNeedsToAdd1095A">
      <Description>Whether the TP is prompted to add a 1095-A</Description>
      <BlockSubmissionOnTrue />
      <Derived>
        <All>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency path="/applicableTaxPayerOrHasAptc" />
          <Dependency path="/1095AsIsDone" />
          <Not>
            <Dependency path="/has1095A" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/tpNeedsToDelete1095A">
      <Description>Whether the TP is prompted to delete a 1095-A (becasue we don't support more than 1)</Description>
      <BlockSubmissionOnTrue />
      <Derived>
        <All>
          <Dependency path="/hasPtcQualifyingPlan" />
          <Dependency path="/applicableTaxPayerOrHasAptc" />
          <Dependency path="/hasMultiple1095As" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/applicableTaxPayerOrHasAptc">
      <Description>TP is applicable or has APTC</Description>
      <Derived>
        <Any>
          <Dependency path="/potentiallyApplicableTaxPayer" />
          <Dependency path="/hasAdvancedPtc" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/taxFamilySizeNegationBasedOnWhetherSomeoneCouldBeClaimed">
      <Description>The number to reduce the taxFamily size based on who can be claimed on the 1040</Description>
      <Derived>
        <Multiply>
          <Add>
            <Count>
              <Dependency module="filers" path="/primarySomeoneCanClaimForTaxBenefits" />
            </Count>
            <Count>
              <Dependency module="filers" path="/secondarySomeoneCanClaimForTaxBenefits" />
            </Count>
          </Add>
          <Int>-1</Int>
        </Multiply>
      </Derived>
    </Fact>

    <Fact path="/taxFamilySize">
      <Description>Tax family size (Filers + dependents)</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
            </When>
            <Then>
              <Add>
                <Int>2</Int>
                <Dependency module="familyAndHousehold" path="/claimedDependentsCount" />
                <Dependency path="/taxFamilySizeNegationBasedOnWhetherSomeoneCouldBeClaimed" />
              </Add>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Add>
                <Int>1</Int>
                <Dependency module="familyAndHousehold" path="/claimedDependentsCount" />
                <Dependency path="/taxFamilySizeNegationBasedOnWhetherSomeoneCouldBeClaimed" />
              </Add>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLocationOptions">
      <Description>Option for which state is used to apply the federal poverty line</Description>
      <Derived>
        <EnumOptions>
          <String>alaska</String>
          <String>hawaii</String>
          <String>other</String>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLocation">
      <Description>The actual location chosen based on residency</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency module="filers" path="/livedInAk" />
            </When>
            <Then>
              <Enum optionsPath="/federalPovertyLocationOptions">alaska</Enum>
            </Then>
          </Case>
          <!-- We don't support this right now -->
          <Case>
            <When>
              <Dependency module="filers" path="/livedInHi" />
            </When>
            <Then>
              <Enum optionsPath="/federalPovertyLocationOptions">hawaii</Enum>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Enum optionsPath="/federalPovertyLocationOptions">other</Enum>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <!-- This is effectively just checking /livedInAk -->
    <Fact path="/federalPovertyLineLocationIsAlaska">
      <Description>Whether federal poverty line location is Alaska</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="/federalPovertyLocation" />
          </Left>
          <Right>
            <Enum optionsPath="/federalPovertyLocationOptions">alaska</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <!-- This is effectively just checking /livedInHi -->
    <Fact path="/federalPovertyLineLocationIsHawaii">
      <Description>Whether federal poverty line location is Hawaii</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="/federalPovertyLocation" />
          </Left>
          <Right>
            <Enum optionsPath="/federalPovertyLocationOptions">hawaii</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLineLocationIsOther">
      <Description>Whether federal poverty line location is other 48 states or DC (not Alaska or Hawaii)</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="/federalPovertyLocation" />
          </Left>
          <Right>
            <Enum optionsPath="/federalPovertyLocationOptions">other</Enum>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLineMagicNumberStartingNumber">
      <Description>Magic number for the federal poverty line starting number based on residence, this form uses the
        previous year's number</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsAlaska" />
            </When>
            <Then>
              <Dollar>18210</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsHawaii" />
            </When>
            <Then>
              <Dollar>16770</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsOther" />
            </When>
            <Then>
              <Dollar>14580</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLineMagicNumberIncrement">
      <Description>Magic number for the federal poverty line increment based on residence, this form uses the previous
        year's number</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsAlaska" />
            </When>
            <Then>
              <Dollar>6430</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsHawaii" />
            </When>
            <Then>
              <Dollar>5910</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/federalPovertyLineLocationIsOther" />
            </When>
            <Then>
              <Dollar>5140</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/taxFamilySizeIsZero">
      <Description>Tax family size is zero</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="/taxFamilySize" />
          </Left>
          <Right>
            <Int>0</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/federalPovertyLevelThreshold">
      <Description>below 100% federal poverty level threshold, used on Form 8962 Line 4</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/taxFamilySizeIsZero" />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Add>
                <Dependency path="/federalPovertyLineMagicNumberStartingNumber" />
                <Multiply>
                  <Subtract>
                    <Minuend>
                      <Dependency path="/taxFamilySize" />
                    </Minuend>
                    <Subtrahends>
                      <Int>1</Int>
                    </Subtrahends>
                  </Subtract>
                  <Dependency path="/federalPovertyLineMagicNumberIncrement" />
                </Multiply>
              </Add>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/ptcMagi">
      <Description>MAGI based on worksheet for PTC</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/taxFamilySizeIsZero" />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Add>
                <Dependency module="taxCalculations" path="/agi" />
                <Dependency module="interest" path="/taxExemptInterest" />
                <!-- Add Form 2555 lines 45 + 50 when we support foreign income -->
                <Dependency module="socialSecurity" path="/nonTaxableSocialSecurityBenefits" />
              </Add>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/householdIncome">
      <Description>The household income for PTC (magi + dependents magi), used on Form 8962 Line 3</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <GreaterOf>
          <Dollar>0</Dollar>
          <Dependency path="/ptcMagi" />
        </GreaterOf>
      </Derived>
    </Fact>

    <Fact path="/householdIncomeAsARational">
      <Description>householdIncome as a Rational</Description>
      <Derived>
        <Multiply>
          <RoundToInt>
            <Dependency path="/householdIncome" />
          </RoundToInt>
          <Rational>1/1</Rational>
        </Multiply>
      </Derived>
    </Fact>


    <Fact path="/federalPovertyLevelThresholdAsARational">
      <Description>federalPovertyLevelThreshold as a rational</Description>
      <Derived>
        <Multiply>
          <RoundToInt>
            <Dependency path="/federalPovertyLevelThreshold" />
          </RoundToInt>
          <Rational>1/1</Rational>
        </Multiply>
      </Derived>
    </Fact>

    <Fact path="/householdIncomeAsPercent">
      <Description>The household income as a percent of the federal poverty line, used on Form 8962 Line 5</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/taxFamilySizeIsZero" />
            </When>
            <Then>
              <Int>0</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <GreaterThan>
                <Left>
                  <Dependency path="/householdIncome" />
                </Left>
                <Right>
                  <Multiply>
                    <Dependency path="/federalPovertyLevelThreshold" />
                    <Int>4</Int>
                  </Multiply>
                </Right>
              </GreaterThan>
            </When>
            <Then>
              <Int>401</Int>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <!-- We intentionally want to round down based on the instructions for this line -->
              <RoundToInt>
                <StepwiseMultiply>
                  <Multiplicand>
                    <Multiply>
                      <TruncateCents>
                        <Divide>
                          <Dividend>
                            <Multiply>
                              <Dependency path="/householdIncomeAsARational" />
                              <!-- Instructions indicate that we should be doing this -->
                              <Int>100</Int>
                            </Multiply>
                          </Dividend>
                          <Divisors>
                            <Dependency path="/federalPovertyLevelThresholdAsARational" />
                          </Divisors>
                        </Divide>
                      </TruncateCents>
                      <Dollar>1</Dollar>
                    </Multiply>
                  </Multiplicand>
                  <Rate>
                    <Rational>1/1</Rational>
                  </Rate>
                </StepwiseMultiply>
              </RoundToInt>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isHouseholdIncome401PercentOfPovertyLine">
      <!-- Not currently used, but theoretically used for line 6 of Form 8962 -->
      <Description>Whether line 5 on Form 8962 has the value 401</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="/householdIncomeAsPercent" />
          </Left>
          <Right>
            <Int>401</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/applicableFigure">
      <Description>Applicable figure based on table 2 for Form 8962 instructions</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency path="/householdIncomeAsPercent" />
                </Left>
                <Right>
                  <Int>150</Int>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Rational>0/10000</Rational>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency path="/householdIncomeAsPercent" />
                </Left>
                <Right>
                  <Int>300</Int>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Multiply>
                <Subtract>
                  <Minuend>
                    <Dependency path="/householdIncomeAsPercent" />
                  </Minuend>
                  <Subtrahends>
                    <Int>150</Int>
                  </Subtrahends>
                </Subtract>
                <Rational>4/10000</Rational>
              </Multiply>
            </Then>
          </Case>
          <Case>
            <When>
              <LessThanOrEqual>
                <Left>
                  <Dependency path="/householdIncomeAsPercent" />
                </Left>
                <Right>
                  <Int>399</Int>
                </Right>
              </LessThanOrEqual>
            </When>
            <Then>
              <Switch>
                <Case>
                  <!-- TODO: consider adding isOdd/isEven helper method for Ints in Scala, as it would simplify this -->
                  <!-- Is odd and needs to add an extra 0.00005 -->
                  <When>
                    <NotEqual>
                      <Left>
                        <StepwiseMultiply>
                          <Multiplicand>
                            <Multiply>
                              <Subtract>
                                <Minuend>
                                  <Dependency path="/householdIncomeAsPercent" />
                                </Minuend>
                                <Subtrahends>
                                  <Int>300</Int>
                                </Subtrahends>
                              </Subtract>
                              <Dollar>25</Dollar>
                            </Multiply>
                          </Multiplicand>
                          <Rate>
                            <Rational>1/10</Rational>
                          </Rate>
                        </StepwiseMultiply>
                      </Left>
                      <Right>
                        <StepwiseMultiply>
                          <Multiplicand>
                            <Add>
                              <Multiply>
                                <Subtract>
                                  <Minuend>
                                    <Dependency path="/householdIncomeAsPercent" />
                                  </Minuend>
                                  <Subtrahends>
                                    <Int>300</Int>
                                  </Subtrahends>
                                </Subtract>
                                <Dollar>25</Dollar>
                              </Multiply>
                              <Dollar>5</Dollar>
                            </Add>
                          </Multiplicand>
                          <Rate>
                            <Rational>1/10</Rational>
                          </Rate>
                        </StepwiseMultiply>
                      </Right>
                    </NotEqual>
                  </When>
                  <Then>
                    <Add>
                      <Multiply>
                        <Rational>25/100000</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="/householdIncomeAsPercent" />
                          </Minuend>
                          <Subtrahends>
                            <Int>300</Int>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                      <Rational>5/100000</Rational>
                      <Rational>600/10000</Rational>
                    </Add>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Add>
                      <Rational>600/10000</Rational>
                      <Multiply>
                        <Rational>25/100000</Rational>
                        <Subtract>
                          <Minuend>
                            <Dependency path="/householdIncomeAsPercent" />
                          </Minuend>
                          <Subtrahends>
                            <Int>300</Int>
                          </Subtrahends>
                        </Subtract>
                      </Multiply>
                    </Add>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <GreaterThanOrEqual>
                <Left>
                  <Dependency path="/householdIncomeAsPercent" />
                </Left>
                <Right>
                  <Int>400</Int>
                </Right>
              </GreaterThanOrEqual>
            </When>
            <Then>
              <Rational>850/10000</Rational>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/formattedApplicableFigure">
      <Description>The applicable figure, but modified to be formatted based on the needs of the XML/PDF</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/taxFamilySizeIsZero" />
            </When>
            <Then>
              <String></String>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <AsDecimalString scale="4">
                <Dependency path="/applicableFigure" />
              </AsDecimalString>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/ptcAnnualContributionAmount">
      <Description>The annual contribution amount, used on Form 8962 Line 8a</Description>
      <Export mef="true" />
      <Derived>
        <Round>
          <!-- We convert householdIncome to an int and Truncate here to prevent the edge case of the intermediate value
          between householdIncome * applicableFigure being a number with too many decimal points that it gets rounded.
          For example, if the product was 1115.4958 this was previous getting rounded to 1115.50 when we represented
          this as a Dollar which when rounded would get rounded up to 1116 instead of rounding the original 1115.4958 to
          1115. -->
          <Multiply>
            <TruncateCents>
              <Multiply>
                <RoundToInt>
                  <Dependency path="/householdIncome" />
                </RoundToInt>
                <Dependency path="/applicableFigure" />
              </Multiply>
            </TruncateCents>
            <Dollar>1</Dollar>
          </Multiply>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/ptcMontlyContributionAmount">
      <Description>monthly contriibution amount, used on Form 8962 Line 8b</Description>
      <Export mef="true" />
      <Derived>
        <Round>
          <Divide>
            <Dividend>
              <Dependency path="/ptcAnnualContributionAmount" />
            </Dividend>
            <Divisors>
              <Int>12</Int>
            </Divisors>
          </Divide>
        </Round>
      </Derived>
    </Fact>

    <Fact path="/isBelow100PercentFederalPovertyLevel">
      <Description>Is below 100% federal poverty level</Description>
      <Derived>
        <LessThan>
          <Left>
            <Dependency path="/householdIncomeAsPercent" />
          </Left>
          <Right>
            <Int>100</Int>
          </Right>
        </LessThan>
      </Derived>
    </Fact>

    <Fact path="/notPtcApplicableTaxPayerSoFar">
      <Description>Not an applicable tax payer for PTC because of MFS exception</Description>
      <Derived>
        <Any>
          <Switch>
            <Case>
              <When>
                <Dependency path="/isMFSAndCantBeClaimed" />
              </When>
              <Then>
                <Any>
                  <Not>
                    <Dependency path="/hasMfsException" />
                  </Not>
                  <Dependency path="/claimingMfsExceptionForFourthStraightYear" />
                </Any>
              </Then>
            </Case>
            <Case>
              <When>
                <True />
              </When>
              <Then>
                <False />
              </Then>
            </Case>
          </Switch>

          <Dependency module="filers"
            path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/notPtcApplicableTaxPayer">
      <Description>Not an applicable tax payer</Description>
      <Derived>
        <Any>
          <All>
            <IsComplete>
              <Dependency path="/notPtcApplicableTaxPayerSoFar" />
            </IsComplete>
            <Dependency path="/notPtcApplicableTaxPayerSoFar" />
          </All>
          <Not>
            <Dependency path="/below100ThresholdAndNotEligibleForMedicaidBecauseOfImmigrationStatus" />
          </Not>
          <Dependency path="/filerNotQualifiedForPtcBecauseOfStatusAndResidenceInfo" />
        </Any>
      </Derived>
    </Fact>

    <!-- We don't have a fact to determine applicable taxpayer because we only deduce that based on the flow, we could
    add one but we would need to ensure that the user has gotten to a certain state in the flow -->
    <Fact path="/potentiallyApplicableTaxPayer">
      <Description>Potential applicable tax payer, we can't ensure this unless we get to a certain state in the flow</Description>
      <Derived>
        <All>
          <Dependency path="/uniqueCircumstancesIsComplete" />
          <Any>
            <Not>
              <IsComplete>
                <Dependency path="/notPtcApplicableTaxPayer" />
              </IsComplete>
            </Not>
            <Not>
              <Dependency path="/notPtcApplicableTaxPayer" />
            </Not>
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path='/potentiallyApplicableTaxPayerOrNotQualifiedPtcWhileTakingAptc'>
      <Description>Potential applicable tax payer, OR did not qualify for PTC but took APTC</Description>

      <Derived>
        <Any>
          <Dependency path="/potentiallyApplicableTaxPayer" />
          <Dependency path="/ptcNotQualifiedHasAptc" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/writableHasEmployerSponsoredPlan">
      <Description>(Writable) Whether the TP or anyone on the marketplace plan has an employer sponsored plan</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasEmployerSponsoredPlan">
      <Description>Whether the TP or anyone on the marketplace plan has an employer sponsored plan</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Any>
                <Not>
                  <Dependency path="/maybeEligibleForPtc" />
                </Not>
                <All>
                  <IsComplete>
                    <Dependency path="/hasPtcQualifyingPlan" />
                  </IsComplete>
                  <Not>
                    <Dependency path="/hasPtcQualifyingPlan" />
                  </Not>
                </All>
              </Any>
            </When>
            <Then>
              <False />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dependency path="/writableHasEmployerSponsoredPlan" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isMFSAndCantBeClaimed">
      <Description>Has filing status of MFS and can't be claimed as a dependent TP</Description>
      <Derived>
        <All>
          <Dependency module="filingStatus" path="/isFilingStatusMFS" />
          <Not>
            <Dependency module="filers"
              path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableHasMfsException">
      <Description>(writable) TP has MFS exception</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/hasMfsException">
      <Description>TP has MFS exception</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/isMFSAndCantBeClaimed" />
            </When>
            <Then>
              <Dependency path="/writableHasMfsException" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/writableClaimingMfsExceptionForFourthStraightYear">
      <Description>(writable) TP claiming MFS exception for the fourth straight year</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/claimingMfsExceptionForFourthStraightYear">
      <Description>TP claiming MFS exception for the fourth straight year</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/hasMfsException" />
            </When>
            <Then>
              <Dependency path="/writableClaimingMfsExceptionForFourthStraightYear" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/claimingMfsException">
      <Description>TP is claiming the MFS exception on Form 8962</Description>
      <Export mef="true" />
      <Derived>
        <Not>
          <Dependency path="/claimingMfsExceptionForFourthStraightYear" />
        </Not>
      </Derived>
    </Fact>

    <Fact path="/maybeApplicableTpAndNoAptcAndBelow100PovertyThreshold">
      <Description>Has no APTC and is below the 100% FPL and is applicable TP</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/notPtcApplicableTaxPayerSoFar" />
          </Not>
          <Not>
            <Dependency path="/hasAdvancedPtc" />
          </Not>
          <Dependency path="/isBelow100PercentFederalPovertyLevel" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableBelow100ThresholdAndNotEligibleForMedicaidBecauseOfImmigrationStatus">
      <Description>(writable) Whether anyone on the Marketplace plan is not eligible for Medicaid becasue of their
        immigration status</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/below100ThresholdAndNotEligibleForMedicaidBecauseOfImmigrationStatus">
      <Description>Whether anyone on the Marketplace plan is not eligible for Medicaid becasue of their immigration
        status</Description>

      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/maybeApplicableTpAndNoAptcAndBelow100PovertyThreshold" />
            </When>
            <Then>
              <Dependency
                path="/writableBelow100ThresholdAndNotEligibleForMedicaidBecauseOfImmigrationStatus" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As">
      <Description>Collection of 1095-As</Description>
      <Writable>
        <Collection />
      </Writable>
    </Fact>

    <Fact path="/1095AsIsDone">
      <Description>Is 1095-As collection done</Description>
      <Writable>
        <Boolean />
      </Writable>
      <Placeholder>
        <False />
      </Placeholder>
    </Fact>

    <Fact path="/1095As/*/hasEnteredAllMonthlyPremiums">
      <Description>TP has entered all valid monthly premiums</Description>
      <Derived>
        <All>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJan" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumJan" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJan" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInFeb" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumFeb" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInFeb" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMar" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumMar" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMar" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInApr" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumApr" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInApr" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMay" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumMay" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMay" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJun" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumJun" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJun" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJul" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumJul" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJul" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInAug" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumAug" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInAug" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInSep" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumSep" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInSep" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInOct" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumOct" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInOct" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInNov" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumNov" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInNov" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInDec" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyPremiumDec" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInDec" />
            </Not>
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasEnteredAllMonthlySlcsp">
      <Description>TP has entered all valid monthly SLCSP premiums</Description>
      <Derived>
        <All>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJan" />
              <Dependency path="../hasJanCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumJan" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJan" />
            </Not>
            <Not>
              <Dependency path="../hasJanCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInFeb" />
              <Dependency path="../hasFebCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumFeb" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInFeb" />
            </Not>
            <Not>
              <Dependency path="../hasFebCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMar" />
              <Dependency path="../hasMarCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumMar" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMar" />
            </Not>
            <Not>
              <Dependency path="../hasMarCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInApr" />
              <Dependency path="../hasAprCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumApr" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInApr" />
            </Not>
            <Not>
              <Dependency path="../hasAprCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMay" />
              <Dependency path="../hasMayCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumMay" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMay" />
            </Not>
            <Not>
              <Dependency path="../hasMayCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJun" />
              <Dependency path="../hasJunCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumJun" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJun" />
            </Not>
            <Not>
              <Dependency path="../hasJunCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJul" />
              <Dependency path="../hasJulCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumJul" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJul" />
            </Not>
            <Not>
              <Dependency path="../hasJulCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInAug" />
              <Dependency path="../hasAugCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumAug" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInAug" />
            </Not>
            <Not>
              <Dependency path="../hasAugCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInSep" />
              <Dependency path="../hasSepCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumSep" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInSep" />
            </Not>
            <Not>
              <Dependency path="../hasSepCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInOct" />
              <Dependency path="../hasOctCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumOct" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInOct" />
            </Not>
            <Not>
              <Dependency path="../hasOctCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInNov" />
              <Dependency path="../hasNovCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumNov" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInNov" />
            </Not>
            <Not>
              <Dependency path="../hasNovCoverageMonth" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInDec" />
              <Dependency path="../hasDecCoverageMonth" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlySlcspPremiumDec" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInDec" />
            </Not>
            <Not>
              <Dependency path="../hasDecCoverageMonth" />
            </Not>
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasEnteredAllMonthlyAptc">
      <Description>TP has entered all valid monthly APTC</Description>
      <Derived>
        <All>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJan" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumJan" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJan" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInFeb" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumFeb" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInFeb" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMar" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumMar" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMar" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInApr" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumApr" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInApr" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInMay" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumMay" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInMay" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJun" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumJun" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJun" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInJul" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumJul" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInJul" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInAug" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumAug" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInAug" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInSep" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumSep" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInSep" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInOct" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumOct" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInOct" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInNov" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumNov" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInNov" />
            </Not>
          </Any>
          <Any>
            <All>
              <Dependency path="../policyIsActiveInDec" />
              <IsComplete>
                <Dependency path="../writablePtcMonthlyAptcPremiumDec" />
              </IsComplete>
            </All>
            <Not>
              <Dependency path="../policyIsActiveInDec" />
            </Not>
          </Any>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/isComplete">
      <Description>If the 1095-A is complete</Description>
      <Derived>
        <Any>
          <All>
            <Dependency path="../hasAptcAndPolicyIsFullYearOrZeroCoverageMonths" />
            <IsComplete>
              <Dependency path="../writableAptcAnnualAmount" />
            </IsComplete>
            <Dependency path="../hasSeenLastAvailableScreen" />
          </All>
          <All>
            <Dependency path="/potentiallyApplicableTaxPayer" />
            <Dependency path="../hasNoCoverageMonthsAndNoAptc" />
          </All>
          <All>
            <Any>
              <All>
                <Dependency path="../hasPolicyForAllMonths" />
                <IsComplete>
                  <Dependency path="../writablePremiumsOrSlcspChange" />
                </IsComplete>
                <Any>
                  <All>
                    <Not>
                      <Dependency path="../premiumsOrSlcspChange" />
                    </Not>
                    <IsComplete>
                      <Dependency path="../writablePtcAnnualPremium" />
                    </IsComplete>
                  </All>
                  <All>
                    <Dependency path="../premiumsOrSlcspChange" />
                    <Dependency path="../hasEnteredAllMonthlyPremiums" />
                  </All>
                </Any>
              </All>
              <All>
                <Dependency path="../hasAtLeastOneCoverageMonth" />
                <Dependency path="../hasEnteredAllMonthlyPremiums" />
              </All>
            </Any>
            <IsComplete>
              <Dependency path="../hasChangeInCircumstance" />
            </IsComplete>
            <Any>
              <All>
                <Dependency path="../hasChangeOrPolicyIsNotForAllMonths" />
                <Dependency path="../hasEnteredAllMonthlySlcsp" />
              </All>
              <All>
                <Dependency path="../noChangesAnd12MonthPolicy" />
                <IsComplete>
                  <Dependency path="../writableSlcspAnnualPremium" />
                </IsComplete>
              </All>
            </Any>
            <Any>
              <Not>
                <Dependency path="/hasAdvancedPtc" />
              </Not>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../showMonthlyAptc" />
                <Dependency path="../hasEnteredAllMonthlyAptc" />
              </All>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../hasAptcAndPolicyIsFullYearOrZeroCoverageMonths" />
                <IsComplete>
                  <Dependency path="../writableAptcAnnualAmount" />
                </IsComplete>
              </All>
            </Any>
            <Dependency path="../hasSeenLastAvailableScreen" />
          </All>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/safeIsComplete">
      <Description>Switch-wrapped 'isComplete' so that it may be used when '../isComplete' is incomplete</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../isComplete" />
              </IsComplete>
            </When>
            <Then>
              <Dependency path="../isComplete" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <False />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasSeenLastAvailableScreen">
      <Name>Has Seen last available screen for PTC</Name>
      <Description>Whether the user has seen the last available scren for this 1095.</Description>

      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/has1095A">
      <Description>Whether the TP has started entering in a form 1095-A</Description>
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Dependency path="/1095As" />
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasMultiple1095As">
      <Description>If the TP has added multiple 1095-As</Description>
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Dependency path="/1095As" />
            </CollectionSize>
          </Left>
          <Right>
            <Int>2</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/marketplaceState">
      <Description>The statethe marketplace plan is from</Description>

      <Writable>
        <Enum optionsPath="/statesAndDistrictsOptions" />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/coverageMonths">
      <Description>List of applicable coverage months</Description>
      <Writable>
        <MultiEnum optionsPath="/1095As/*/monthOptions" />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/policyNumber">
      <Description>Policy number associated with the 1095</Description>
      <Writable>
        <String />
        <Limit type="Match">
          <String><![CDATA[[\sA-Za-z0-9\-]+]]></String>
        </Limit>
        <Limit type="MaxLength">
          <Int>50</Int>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePolicyStartDate">
      <Description>(writable)Start date of policy</Description>
      <Writable>
        <Day />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/policyStartDate">
      <Description>Start date of policy</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/potentiallyApplicableTaxPayer" />
            </When>
            <Then>
              <Dependency path="../writablePolicyStartDate" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartDateMonthAsString">
      <Description>Starting month of policy as a String</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../policyStartsInJan" />
            </When>
            <Then>
              <String>January</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInFeb" />
            </When>
            <Then>
              <String>February</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInMar" />
            </When>
            <Then>
              <String>March</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInApr" />
            </When>
            <Then>
              <String>April</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInMay" />
            </When>
            <Then>
              <String>May</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInJun" />
            </When>
            <Then>
              <String>June</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInJul" />
            </When>
            <Then>
              <String>July</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInAug" />
            </When>
            <Then>
              <String>August</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInSep" />
            </When>
            <Then>
              <String>September</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInOct" />
            </When>
            <Then>
              <String>October</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInNov" />
            </When>
            <Then>
              <String>November</String>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyStartsInDec" />
            </When>
            <Then>
              <String>December</String>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePolicyEndDate">
      <Description>(writable)End/termination date of policy</Description>
      <Writable>
        <Day />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/policyEndDate">
      <Description>End/termination date of policy</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/potentiallyApplicableTaxPayer" />
            </When>
            <Then>
              <Dependency path="../writablePolicyEndDate" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <!-- Writable because it's optional checkbox, the way its used in maybeHasPolicyDateException makes it so we don't
    need a derived version -->
    <Fact path="/1095As/*/writableSpecialPolicyModificationInStartingMonth">
      <Description>Whether someone on the plan was born, adopted, or placed for adoption or foster care during the month
        when the policy started</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/maybeHasPolicyDateException">
      <Description>Whether we need to ask the TP more questions to determine if they have a policy date exception</Description>
      <Derived>
        <All>
          <Dependency path="/potentiallyApplicableTaxPayer" />
          <Dependency path="../writableSpecialPolicyModificationInStartingMonth" />
          <NotEqual>
            <Left>
              <Dependency path="../policyStartDate/day" />
            </Left>
            <Right>
              <Int>1</Int>
            </Right>
          </NotEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writableHasPolicyDateException">
      <Description>(Writable) whether the TP has a policy date exception and count the starting month of their policy as
        a qualifying month</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/hasPolicyDateException">
      <Description>Whether the TP has a policy date exception and count the starting month of their policy as a
        qualifying month</Description>
      <Derived>
        <All>
          <Dependency path="../maybeHasPolicyDateException" />
          <Dependency path="../writableHasPolicyDateException" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasPolicyDateError">
      <Description>Whether there are errors with the taxpayer's entered policy dates</Description>
      <Derived>
        <LessThan>
          <Left>
            <Dependency path="../writablePolicyEndDate" />
          </Left>
          <Right>
            <Dependency path="../writablePolicyStartDate" />
          </Right>
        </LessThan>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasCoverageMonths">
      <Description>Has at least one coverage month</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/hasNoCoverageMonthsAndNoAptc">
      <Description>Has no coverage months and has no APTC</Description>
      <Derived>
        <All>
          <Any>
            <Not>
              <Dependency path="../hasCoverageMonths" />
            </Not>
            <Dependency path="../hasNoPotentialCoverageMonths" />
          </Any>
          <Not>
            <Dependency path="/hasAdvancedPtc" />
          </Not>
        </All>
      </Derived>
    </Fact>


    <Fact path="/1095As/*/policyStartsInJan">
      <Description>Whether the starting date begins in Jan</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInFeb">
      <Description>Whether the starting date begins in Feb</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>2</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInMar">
      <Description>Whether the starting date begins in Mar</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>3</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInApr">
      <Description>Whether the starting date begins in Apr</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>4</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInMay">
      <Description>Whether the starting date begins in May</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>5</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInJun">
      <Description>Whether the starting date begins in Jun</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>6</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInJul">
      <Description>Whether the starting date begins in Jul</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>7</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInAug">
      <Description>Whether the starting date begins in Aug</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>8</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInSep">
      <Description>Whether the starting date begins in Sep</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>9</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInOct">
      <Description>Whether the starting date begins in Oct</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>10</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInNov">
      <Description>Whether the starting date begins in Nov</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>11</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyStartsInDec">
      <Description>Whether the starting date begins in Dec</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyStartDate/month" />
          </Left>
          <Right>
            <Int>12</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInFeb">
      <Description>Whether the policy contains or ends in Feb</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>2</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>2</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInMar">
      <Description>Whether the policy contains or ends in Mar</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>3</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>3</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInApr">
      <Description>Whether the policy contains or ends in Apr</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>4</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>4</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInMay">
      <Description>Whether the policy contains or ends in May</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>5</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>5</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInJun">
      <Description>Whether the policy contains or ends in Jun</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>6</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>6</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInJul">
      <Description>Whether the policy contains or ends in Jul</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>7</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>7</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInAug">
      <Description>Whether the policy contains or ends in Aug</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>8</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>8</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInSep">
      <Description>Whether the policy contains or ends in Sep</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>9</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>9</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInOct">
      <Description>Whether the policy contains or ends in Oct</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>10</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>10</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyContainsOrEndsInNov">
      <Description>Whether the policy contains or ends in Nov</Description>
      <Derived>
        <All>
          <LessThan>
            <Left>
              <Dependency path="../policyStartDate/month" />
            </Left>
            <Right>
              <Int>11</Int>
            </Right>
          </LessThan>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>11</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/monthOptions">
      <Description>Possible month options for a given 1095-A (policy)</Description>

      <Derived>
        <EnumOptions>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInJan" />
                </All>
                <All>
                  <Dependency path="../policyStartsInJan" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
              </Any>
            </Condition>
            <Value>
              <String>jan</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInFeb" />
                </All>
                <All>
                  <Dependency path="../policyStartsInFeb" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInFeb" />
              </Any>
            </Condition>
            <Value>
              <String>feb</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInMar" />
                </All>
                <All>
                  <Dependency path="../policyStartsInMar" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInMar" />
              </Any>
            </Condition>
            <Value>
              <String>mar</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInApr" />
                </All>
                <All>
                  <Dependency path="../policyStartsInApr" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInApr" />
              </Any>
            </Condition>
            <Value>
              <String>apr</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInMay" />
                </All>
                <All>
                  <Dependency path="../policyStartsInMay" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInMay" />
              </Any>
            </Condition>
            <Value>
              <String>may</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInJun" />
                </All>
                <All>
                  <Dependency path="../policyStartsInJun" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInJun" />
              </Any>
            </Condition>
            <Value>
              <String>jun</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInJul" />
                </All>
                <All>
                  <Dependency path="../policyStartsInJul" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInJul" />
              </Any>
            </Condition>
            <Value>
              <String>jul</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInAug" />
                </All>
                <All>
                  <Dependency path="../policyStartsInAug" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInAug" />
              </Any>
            </Condition>
            <Value>
              <String>aug</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInSep" />
                </All>
                <All>
                  <Dependency path="../policyStartsInSep" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInSep" />
              </Any>
            </Condition>
            <Value>
              <String>sep</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInOct" />
                </All>
                <All>
                  <Dependency path="../policyStartsInOct" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInOct" />
              </Any>
            </Condition>
            <Value>
              <String>oct</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Equal>
                    <Left>
                      <Dependency path="../policyStartDate/day" />
                    </Left>
                    <Right>
                      <Int>1</Int>
                    </Right>
                  </Equal>
                  <Dependency path="../policyStartsInNov" />
                </All>
                <All>
                  <Dependency path="../policyStartsInNov" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
                <Dependency path="../policyContainsOrEndsInNov" />
              </Any>
            </Condition>
            <Value>
              <String>nov</String>
            </Value>
          </EnumOption>
          <EnumOption>
            <Condition>
              <Any>
                <All>
                  <Not>
                    <Dependency path="../policyStartsInDec" />
                  </Not>
                  <Equal>
                    <Left>
                      <Dependency path="../policyEndDate/month" />
                    </Left>
                    <Right>
                      <Int>12</Int>
                    </Right>
                  </Equal>
                </All>
                <All>
                  <Dependency path="../policyStartsInDec" />
                  <Dependency path="../hasPolicyDateException" />
                </All>
              </Any>
            </Condition>
            <Value>
              <String>dec</String>
            </Value>
          </EnumOption>
        </EnumOptions>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasCoverageMonthAndHasPotentialCoverageMonths">
      <Description>Indicates they have coverage month and has potential coverage months</Description>
      <Derived>
        <All>
          <Dependency path="../hasCoverageMonths" />
          <Not>
            <Dependency path="../hasNoPotentialCoverageMonths" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasNoPotentialCoverageMonths">
      <Description>Whether there are no month options available (ie. there are no potential coverage months)</Description>
      <Derived>
        <Equal>
          <Left>
            <EnumOptionsSize>
              <Dependency path="../monthOptions" />
            </EnumOptionsSize>
          </Left>
          <Right>
            <Int>0</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/eligibleForCoverageMonths">
      <Description>Eligible for coverage months on the 1095-A</Description>
      <Derived>
        <All>
          <Dependency path="../hasCoverageMonths" />
          <Dependency path="/potentiallyApplicableTaxPayer" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasJanCoverageMonth">
      <Description>Has coverage in the month of Jan</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jan</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jan</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasFebCoverageMonth">
      <Description>Has coverage in the month of Feb</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">feb</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">feb</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasMarCoverageMonth">
      <Description>Has coverage in the month of Mar</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">mar</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">mar</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasAprCoverageMonth">
      <Description>Has coverage in the month of Apr</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">apr</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">apr</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasMayCoverageMonth">
      <Description>Has coverage in the month of May</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">may</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">may</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasJunCoverageMonth">
      <Description>Has coverage in the month of Jun</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jun</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jun</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasJulCoverageMonth">
      <Description>Has coverage in the month of Jul</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jul</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">jul</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasAugCoverageMonth">
      <Description>Has coverage in the month of Aug</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">aug</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">aug</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasSepCoverageMonth">
      <Description>Has coverage in the month of Sep</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">sep</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">sep</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasOctCoverageMonth">
      <Description>Has coverage in the month of Oct</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">oct</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">oct</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasNovCoverageMonth">
      <Description>Has coverage in the month of Nov</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">nov</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">nov</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasDecCoverageMonth">
      <Description>Has coverage in the month of Dec</Description>
      <Derived>
        <All>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../monthOptions" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">dec</Enum>
            </Value>
          </EnumOptionsContains>
          <EnumOptionsContains>
            <Options>
              <Dependency path="../coverageMonths" />
            </Options>
            <Value>
              <Enum optionsPath="../monthOptions">dec</Enum>
            </Value>
          </EnumOptionsContains>
          <Dependency path="../eligibleForCoverageMonths" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/numberOfCoverageMonths">
      <Description>The number of months the TP had coverage months within a 1095-A</Description>
      <Derived>
        <Add>
          <Count>
            <Dependency path="../hasJanCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasFebCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasMarCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasAprCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasMayCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasJunCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasJulCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasAugCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasSepCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasOctCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasNovCoverageMonth" />
          </Count>
          <Count>
            <Dependency path="../hasDecCoverageMonth" />
          </Count>
        </Add>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasPolicyForAllMonths">
      <Description>Whether the policy lasts all 12 months</Description>
      <Derived>
        <All>
          <Dependency path="../policyStartsInJan" />
          <Equal>
            <Left>
              <Dependency path="../policyEndDate/month" />
            </Left>
            <Right>
              <Int>12</Int>
            </Right>
          </Equal>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInJan">
      <Description>Whether the policy is active in Jan</Description>
      <Derived>
        <Dependency path="../policyStartsInJan" />
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInFeb">
      <Description>Whether the policy is active in Feb</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInFeb" />
          <Dependency path="../policyContainsOrEndsInFeb" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInMar">
      <Description>Whether the policy is active in Mar</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInMar" />
          <Dependency path="../policyContainsOrEndsInMar" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInApr">
      <Description>Whether the policy is active in Apr</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInApr" />
          <Dependency path="../policyContainsOrEndsInApr" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInMay">
      <Description>Whether the policy is active in May</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInMay" />
          <Dependency path="../policyContainsOrEndsInMay" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInJun">
      <Description>Whether the policy is active in Jun</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInJun" />
          <Dependency path="../policyContainsOrEndsInJun" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInJul">
      <Description>Whether the policy is active in Jul</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInJul" />
          <Dependency path="../policyContainsOrEndsInJul" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInAug">
      <Description>Whether the policy is active in Aug</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInAug" />
          <Dependency path="../policyContainsOrEndsInAug" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInSep">
      <Description>Whether the policy is active in Sep</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInSep" />
          <Dependency path="../policyContainsOrEndsInSep" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInOct">
      <Description>Whether the policy is active in Oct</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInOct" />
          <Dependency path="../policyContainsOrEndsInOct" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInNov">
      <Description>Whether the policy is active in Nov</Description>
      <Derived>
        <Any>
          <Dependency path="../policyStartsInNov" />
          <Dependency path="../policyContainsOrEndsInNov" />
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/policyIsActiveInDec">
      <Description>Whether the policy is active in Dec</Description>
      <Derived>
        <Equal>
          <Left>
            <Dependency path="../policyEndDate/month" />
          </Left>
          <Right>
            <Int>12</Int>
          </Right>
        </Equal>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePremiumsOrSlcspChange">
      <Description>(writable)Whether the enrollment premiums or SLCSP change with the TY</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/premiumsOrSlcspChange">
      <Description>Whether the enrollment premiums or SLCSP change with the TY</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="../hasAtLeastOneCoverageMonth" />
                <Dependency path="../hasPolicyForAllMonths" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePremiumsOrSlcspChange" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePtcAnnualPremium">
      <Description>(Writable) annual PTC premiums</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/ptcAnnualPremium">
      <Description>Annual PTC premium</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Not>
                <Dependency path="../premiumsOrSlcspChange" />
              </Not>
            </When>
            <Then>
              <Dependency path="../writablePtcAnnualPremium" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writableSlcspAnnualPremium">
      <Description>(Writable) annual SLCSP premium</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/slcspAnnualPremium">
      <Description>annual SLCSP premium</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../noChangesAnd12MonthPolicy" />
            </When>
            <Then>
              <Dependency path="../writableSlcspAnnualPremium" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumJan">
      <Description>Premium in Jan</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInJan" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumJan" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumFeb">
      <Description>Premium in Feb</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInFeb" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumFeb" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumMar">
      <Description>Premium in Mar</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInMar" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumMar" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumApr">
      <Description>Premium in Apr</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInApr" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumApr" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumMay">
      <Description>Premium in May</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInMay" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumMay" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumJun">
      <Description>Premium in Jun</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInJun" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumJun" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumJul">
      <Description>Premium in Jul</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInJul" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumJul" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumAug">
      <Description>Premium in Aug</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInAug" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumAug" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumSep">
      <Description>Premium in Sep</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInSep" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumSep" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumOct">
      <Description>Premium in Oct</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInOct" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumOct" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumNov">
      <Description>Premium in Nov</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInNov" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumNov" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyPremiumDec">
      <Description>Premium in Dec</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../ptcAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../ptcAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../policyIsActiveInDec" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyPremiumDec" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumJan">
      <Description>(writable)Premium in Jan</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumFeb">
      <Description>(writable)Premium in Feb</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumMar">
      <Description>(writable)Premium in Mar</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumApr">
      <Description>(writable)Premium in Apr</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumMay">
      <Description>(writable)Premium in May</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumJun">
      <Description>(writable)Premium in Jun</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumJul">
      <Description>(writable)Premium in Jul</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumAug">
      <Description>(writable)Premium in Aug</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumSep">
      <Description>(writable)Premium in Sep</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumOct">
      <Description>(writable)Premium in Oct</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumNov">
      <Description>(writable)Premium in Nov</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyPremiumDec">
      <Description>(writable)Premium in Dec</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/hasChangeInCircumstance">
      <Description>Whether the TP or anyone enrolled in Marketplace plan have a change in circumstance that wasn't
        already reported</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/1095As/*/hasChangeOrPolicyIsNotForAllMonths">
      <Description>Whether there is a change in premiums or circumstances or the policy is not for all 12 months</Description>
      <Derived>
        <Any>
          <Dependency path="../premiumsOrSlcspChange" />
          <Dependency path="../hasChangeInCircumstance" />
          <Not>
            <Dependency path="../hasPolicyForAllMonths" />
          </Not>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/showMonthlyAptc">
      <Description>Whether to show Monthly APTC question (has APTC and hasChangeOrPolicyIsNotForAllMonths)</Description>
      <Derived>
        <All>
          <Dependency path="../hasChangeOrPolicyIsNotForAllMonths" />
          <Dependency path="/hasAdvancedPtc" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/noChangesAnd12MonthPolicy">
      <Description>Whether there is no change in premiums and no change in circumstances and the policy for all 12
        months</Description>
      <Derived>
        <All>
          <Dependency path="../hasPolicyForAllMonths" />
          <Not>
            <Dependency path="../premiumsOrSlcspChange" />
          </Not>
          <Not>
            <Dependency path="../hasChangeInCircumstance" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasStateMarketplacePlan">
      <Description>Has a state issued marketplace plan (as opposed to a federal plan)</Description>
      <Derived>
        <Any>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ca</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">co</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ct</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">dc</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ga</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">id</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ky</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">me</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">md</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ma</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">mn</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">nv</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">nj</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">nm</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ny</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">pa</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">ri</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">vt</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">va</Enum>
            </Right>
          </Equal>
          <Equal>
            <Left>
              <Dependency path="../marketplaceState" />
            </Left>
            <Right>
              <Enum optionsPath="/statesAndDistrictsOptions">wa</Enum>
            </Right>
          </Equal>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumJan">
      <Description>SLCSP Premium in Jan</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasJanCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumJan" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumFeb">
      <Description>SLCSP Premium in Feb</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasFebCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumFeb" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumMar">
      <Description>SLCSP Premium in Mar</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasMarCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumMar" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumApr">
      <Description>SLCSP Premium in Apr</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasAprCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumApr" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumMay">
      <Description>SLCSP Premium in May</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasMayCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumMay" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumJun">
      <Description>SLCSP Premium in Jun</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasJunCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumJun" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumJul">
      <Description>SLCSP Premium in Jul</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasJulCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumJul" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumAug">
      <Description>SLCSP Premium in Aug</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasAugCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumAug" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumSep">
      <Description>SLCSP Premium in Sep</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasSepCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumSep" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumOct">
      <Description>SLCSP Premium in Oct</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasOctCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumOct" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumNov">
      <Description>SLCSP Premium in Nov</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasNovCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumNov" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlySlcspPremiumDec">
      <Description>SLCSP Premium in Dec</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../slcspAnnualPremium" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../slcspAnnualPremium" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasDecCoverageMonth" />
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlySlcspPremiumDec" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderJan">
      <Description>SLCSP placeholder for Jan when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderFeb">
      <Description>SLCSP placeholder for Feb when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderMar">
      <Description>SLCSP placeholder for Mar when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderApr">
      <Description>SLCSP placeholder for Apr when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderMay">
      <Description>SLCSP placeholder for May when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderJun">
      <Description>SLCSP placeholder for Jun when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderJul">
      <Description>SLCSP placeholder for Jul when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderAug">
      <Description>SLCSP placeholder for Aug when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderSep">
      <Description>SLCSP placeholder for Sep when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderOct">
      <Description>SLCSP placeholder for Oct when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderNov">
      <Description>SLCSP placeholder for Nov when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/slcspPremiumPlaceholderDec">
      <Description>SLCSP placeholder for Dec when month is not a coverage month and the amount should be 0</Description>
      <Derived>
        <Dollar>0</Dollar>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumJan">
      <Description>(writable)SLCSP Premium in Jan</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumFeb">
      <Description>(writable)SLCSP Premium in Feb</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumMar">
      <Description>(writable)SLCSP Premium in Mar</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumApr">
      <Description>(writable)SLCSP Premium in Apr</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumMay">
      <Description>(writable)SLCSP Premium in May</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumJun">
      <Description>(writable)SLCSP Premium in Jun</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumJul">
      <Description>(writable)SLCSP Premium in Jul</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumAug">
      <Description>(writable)SLCSP Premium in Aug</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumSep">
      <Description>(writable)SLCSP Premium in Sep</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumOct">
      <Description>(writable)SLCSP Premium in Oct</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumNov">
      <Description>(writable)SLCSP Premium in Nov</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlySlcspPremiumDec">
      <Description>(writable)SLCSP Premium in Dec</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumJan">
      <Description>APTC Premium in Jan</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInJan" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumJan" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumFeb">
      <Description>APTC Premium in Feb</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInFeb" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumFeb" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumMar">
      <Description>APTC Premium in Mar</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInMar" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumMar" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumApr">
      <Description>APTC Premium in Apr</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInApr" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumApr" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumMay">
      <Description>APTC Premium in May</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInMay" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumMay" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumJun">
      <Description>APTC Premium in Jun</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInJun" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumJun" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumJul">
      <Description>APTC Premium in Jul</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInJul" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumJul" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumAug">
      <Description>APTC Premium in Aug</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInAug" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumAug" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumSep">
      <Description>APTC Premium in Sep</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInSep" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumSep" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumOct">
      <Description>APTC Premium in Oct</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInOct" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumOct" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumNov">
      <Description>APTC Premium in Nov</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInNov" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumNov" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/ptcMonthlyAptcPremiumDec">
      <Description>APTC Premium in Dec</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="../aptcAnnualAmount" />
              </IsComplete>
            </When>
            <Then>
              <Divide>
                <Dividend>
                  <Dependency path="../aptcAnnualAmount" />
                </Dividend>
                <Divisors>
                  <Int>12</Int>
                </Divisors>
              </Divide>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <Dependency path="/hasAdvancedPtc" />
                <Dependency path="../policyIsActiveInDec" />
              </All>
            </When>
            <Then>
              <Dependency path="../writablePtcMonthlyAptcPremiumDec" />
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumJan">
      <Description>(writable)APTC Premium in Jan</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumFeb">
      <Description>(writable)APTC Premium in Feb</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumMar">
      <Description>(writable)APTC Premium in Mar</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumApr">
      <Description>(writable)APTC Premium in Apr</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumMay">
      <Description>(writable)APTC Premium in May</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumJun">
      <Description>(writable)APTC Premium in Jun</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumJul">
      <Description>(writable)APTC Premium in Jul</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumAug">
      <Description>(writable)APTC Premium in Aug</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumSep">
      <Description>(writable)APTC Premium in Sep</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumOct">
      <Description>(writable)APTC Premium in Oct</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumNov">
      <Description>(writable)APTC Premium in Nov</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writablePtcMonthlyAptcPremiumDec">
      <Description>(writable)APTC Premium in Dec</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/writableAptcAnnualAmount">
      <Description>(Writable) annual APTC premium</Description>
      <Writable>
        <Dollar />
        <Limit type="Min">
          <Dollar>0.50</Dollar>
        </Limit>
      </Writable>
    </Fact>

    <Fact path="/1095As/*/aptcAnnualAmount">
      <Description>Annual APTC amount</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="../hasAptcAndPolicyIsFullYearOrZeroCoverageMonths" />
            </When>
            <Then>
              <Dependency path="../writableAptcAnnualAmount" />
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="../hasNoAptcAndPolicyIsFullYearOrZeroCoverageMonths" />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasZeroCoverageMonths">
      <Description>The number of coverage months is zero</Description>
      <Derived>
        <Any>
          <Equal>
            <Left>
              <Dependency path="../numberOfCoverageMonths" />
            </Left>
            <Right>
              <Int>0</Int>
            </Right>
          </Equal>
        </Any>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasAtLeastOneCoverageMonth">
      <Description>The number of coverage months is zero</Description>
      <Derived>
        <All>
          <GreaterThanOrEqual>
            <Left>
              <Dependency path="../numberOfCoverageMonths" />
            </Left>
            <Right>
              <Int>1</Int>
            </Right>
          </GreaterThanOrEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasAptcAndPolicyIsFullYearOrZeroCoverageMonths">
      <Description>Has APTC and either policy is for all 12 months or there are no coverage months</Description>
      <Derived>
        <All>
          <Any>
            <Dependency path="../noChangesAnd12MonthPolicy" />
            <Dependency path="../hasZeroCoverageMonths" />
          </Any>
          <Dependency path="/hasAdvancedPtc" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasNoAptcAndPolicyIsFullYearOrZeroCoverageMonths">
      <Description>Doesn't have APTC and either policy is for all 12 months or there are no coverage months</Description>
      <Derived>
        <All>
          <Any>
            <Dependency path="../noChangesAnd12MonthPolicy" />
            <Dependency path="../hasZeroCoverageMonths" />
          </Any>
          <Not>
            <Dependency path="/hasAdvancedPtc" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/1095As/*/hasCoverageMonthsOrAptc">
      <Description>Either has coverage months or APTC</Description>
      <Derived>
        <Any>
          <Dependency path="../hasAtLeastOneCoverageMonth" />
          <Dependency path="/hasAdvancedPtc" />
        </Any>
      </Derived>
    </Fact>

    <!-- It's unclear how we should actually be calculating this when we support multiple 1095-As -->
    <!-- TODO: Update to check if any 1095 has the opposite -->
    <Fact path="/ptcCanReportAnnualTotals">
      <Description>Whether the TP can report annual totals</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Any>
                  <Dependency path="noChangesAnd12MonthPolicy" />
                  <All>
                    <Dependency path="hasZeroCoverageMonths" />
                    <Dependency path="/hasAdvancedPtc" />
                  </All>
                </Any>
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/totalPtcAnnualPremium">
      <Description>Total PTC annual premiums</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcAnnualPremium" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/totalAnnualSlcspPremium">
      <Description>Total annual SLCSP premiums</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/slcspAnnualPremium" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/totalAnnualAptcAmount">
      <Description>Total annual APTC amount</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/aptcAnnualAmount" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/annualMaxPremiumAssitance">
      <Description>Annual max premium assitance, Form 8962 Line 11d</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Not>
                      <IsComplete>
                        <Dependency path="/totalAnnualSlcspPremium" />
                      </IsComplete>
                    </Not>
                  </When>
                  <Then>
                    <Dollar>0</Dollar>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <GreaterOf>
                      <Dollar>0</Dollar>
                      <Subtract>
                        <Minuend>
                          <Dependency path="/totalAnnualSlcspPremium" />
                        </Minuend>
                        <Subtrahends>
                          <Dependency path="/ptcAnnualContributionAmount" />
                        </Subtrahends>
                      </Subtract>
                    </GreaterOf>
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/annualPtcAllowed">
      <Description>Max PTC allowed</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/annualMaxPremiumAssitance" />
                <Switch>
                  <Case>
                    <When>
                      <Not>
                        <IsComplete>
                          <Dependency path="/totalPtcAnnualPremium" />
                        </IsComplete>
                      </Not>
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dependency path="/totalPtcAnnualPremium" />
                    </Then>
                  </Case>
                </Switch>
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/submittedAnnualContributionAmountForAnnual">
      <Description>The submitted annual contribution if annual is applicable, Line 11c</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Dependency path="/ptcAnnualContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/needsToFileForm8962Monthly">
      <Description>Needs to File Form 8962 and needs to file montly</Description>
      <Export mef="true" />
      <Derived>
        <All>
          <Dependency path="/mayNeedToFileForm8962" />
          <Not>
            <Dependency path="/ptcCanReportAnnualTotals" />
          </Not>
        </All>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInJan">
      <Description>Has at least one active policy in Jan</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInJan" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInFeb">
      <Description>Has at least one active policy in Feb</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInFeb" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInMar">
      <Description>Has at least one active policy in Mar</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInMar" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInApr">
      <Description>Has at least one active policy in Apr</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInApr" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInMay">
      <Description>Has at least one active policy in May</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInMay" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInJun">
      <Description>Has at least one active policy in Jun</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInJun" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInJul">
      <Description>Has at least one active policy in Jul</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInJul" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInAug">
      <Description>Has at least one active policy in Aug</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInAug" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInSep">
      <Description>Has at least one active policy in Sep</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInSep" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInOct">
      <Description>Has at least one active policy in Oct</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInOct" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInNov">
      <Description>Has at least one active policy in Nov</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInNov" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/hasActive1095APolicyInDec">
      <Description>Has at least one active policy in Dec</Description>
      <Export mef="true" />
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <CollectionSize>
              <Filter path="/1095As">
                <Dependency path="policyIsActiveInDec" />
              </Filter>
            </CollectionSize>
          </Left>
          <Right>
            <Int>1</Int>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForJan">
      <Description>The monthly PTC premium for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumJan" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForFeb">
      <Description>The monthly PTC premium for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumFeb" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForMar">
      <Description>The monthly PTC premium for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumMar" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForApr">
      <Description>The monthly PTC premium for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumApr" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForMay">
      <Description>The monthly PTC premium for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumMay" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForJun">
      <Description>The monthly PTC premium for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumJun" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForJul">
      <Description>The monthly PTC premium for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumJul" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForAug">
      <Description>The monthly PTC premium for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumAug" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForSep">
      <Description>The monthly PTC premium for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumSep" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForOct">
      <Description>The monthly PTC premium for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumOct" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForNov">
      <Description>The monthly PTC premium for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumNov" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcPremiumForDec">
      <Description>The monthly PTC premium for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyPremiumDec" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForJan">
      <Description>The monthly PTC SLCSP premium for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumJan" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForFeb">
      <Description>The monthly PTC SLCSP premium for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumFeb" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForMar">
      <Description>The monthly PTC SLCSP premium for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumMar" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForApr">
      <Description>The monthly PTC SLCSP premium for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumApr" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForMay">
      <Description>The monthly PTC SLCSP premium for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumMay" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForJun">
      <Description>The monthly PTC SLCSP premium for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumJun" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForJul">
      <Description>The monthly PTC SLCSP premium for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumJul" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForAug">
      <Description>The monthly PTC SLCSP premium for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumAug" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForSep">
      <Description>The monthly PTC SLCSP premium for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumSep" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForOct">
      <Description>The monthly PTC SLCSP premium for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumOct" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForNov">
      <Description>The monthly PTC SLCSP premium for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumNov" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcSlcspPremiumForDec">
      <Description>The monthly PTC SLCSP premium for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlySlcspPremiumDec" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForJan">
      <Description>The monthly PTC contribution amount for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForFeb">
      <Description>The monthly PTC contribution amount for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForMar">
      <Description>The monthly PTC contribution amount for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForApr">
      <Description>The monthly PTC contribution amount for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForMay">
      <Description>The monthly PTC contribution amount for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForJun">
      <Description>The monthly PTC contribution amount for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForJul">
      <Description>The monthly PTC contribution amount for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForAug">
      <Description>The monthly PTC contribution amount for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForSep">
      <Description>The monthly PTC contribution amount for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForOct">
      <Description>The monthly PTC contribution amount for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForNov">
      <Description>The monthly PTC contribution amount for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcContributionAmountForDec">
      <Description>The monthly PTC contribution amount for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <Dependency path="/ptcMontlyContributionAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForJan">
      <Description>The monthly PTC max premium assitance for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForJan" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForJan" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForFeb">
      <Description>The monthly PTC max premium assitance for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForFeb" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForFeb" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForMar">
      <Description>The monthly PTC max premium assitance for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForMar" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForMar" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForApr">
      <Description>The monthly PTC max premium assitance for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForApr" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForApr" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForMay">
      <Description>The monthly PTC max premium assitance for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForMay" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForMay" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForJun">
      <Description>The monthly PTC max premium assitance for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForJun" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForJun" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForJul">
      <Description>The monthly PTC max premium assitance for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForJul" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForJul" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForAug">
      <Description>The monthly PTC max premium assitance for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForAug" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForAug" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForSep">
      <Description>The monthly PTC max premium assitance for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForSep" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForSep" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForOct">
      <Description>The monthly PTC max premium assitance for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForOct" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForOct" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForNov">
      <Description>The monthly PTC max premium assitance for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForNov" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForNov" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcMaxPremiumAssitanceForDec">
      <Description>The monthly PTC max premium assitance for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <GreaterOf>
                <Dollar>0</Dollar>
                <Subtract>
                  <Minuend>
                    <Dependency path="/monthlyPtcSlcspPremiumForDec" />
                  </Minuend>
                  <Subtrahends>
                    <Dependency path="/monthlyPtcContributionAmountForDec" />
                  </Subtrahends>
                </Subtract>
              </GreaterOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForJan">
      <Description>The monthly PTC allowed for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForJan" />
                <Dependency path="/monthlyPtcPremiumForJan" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForFeb">
      <Description>The monthly PTC allowed for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForFeb" />
                <Dependency path="/monthlyPtcPremiumForFeb" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForMar">
      <Description>The monthly PTC allowed for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForMar" />
                <Dependency path="/monthlyPtcPremiumForMar" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForApr">
      <Description>The monthly PTC allowed for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForApr" />
                <Dependency path="/monthlyPtcPremiumForApr" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForMay">
      <Description>The monthly PTC allowed for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForMay" />
                <Dependency path="/monthlyPtcPremiumForMay" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForJun">
      <Description>The monthly PTC allowed for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForJun" />
                <Dependency path="/monthlyPtcPremiumForJun" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForJul">
      <Description>The monthly PTC allowed for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForJul" />
                <Dependency path="/monthlyPtcPremiumForJul" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForAug">
      <Description>The monthly PTC allowed for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForAug" />
                <Dependency path="/monthlyPtcPremiumForAug" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForSep">
      <Description>The monthly PTC allowed for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForSep" />
                <Dependency path="/monthlyPtcPremiumForSep" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForOct">
      <Description>The monthly PTC allowed for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForOct" />
                <Dependency path="/monthlyPtcPremiumForOct" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForNov">
      <Description>The monthly PTC allowed for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForNov" />
                <Dependency path="/monthlyPtcPremiumForNov" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyPtcAllowedForDec">
      <Description>The monthly PTC allowed for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <LesserOf>
                <Dependency path="/monthlyPtcMaxPremiumAssitanceForDec" />
                <Dependency path="/monthlyPtcPremiumForDec" />
              </LesserOf>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForJan">
      <Description>The monthly APTC premium for Jan</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJan" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumJan" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForFeb">
      <Description>The monthly APTC premium for Feb</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInFeb" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumFeb" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForMar">
      <Description>The monthly APTC premium for Mar</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMar" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumMar" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForApr">
      <Description>The monthly APTC premium for Apr</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInApr" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumApr" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForMay">
      <Description>The monthly APTC premium for May</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInMay" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumMay" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForJun">
      <Description>The monthly APTC premium for Jun</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJun" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumJun" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForJul">
      <Description>The monthly APTC premium for Jul</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInJul" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumJul" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForAug">
      <Description>The monthly APTC premium for Aug</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInAug" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumAug" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForSep">
      <Description>The monthly APTC premium for Sep</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInSep" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumSep" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForOct">
      <Description>The monthly APTC premium for Oct</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInOct" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumOct" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForNov">
      <Description>The monthly APTC premium for Nov</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInNov" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumNov" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/monthlyAptcPremiumForDec">
      <Description>The monthly APTC premium for Dec</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/needsToFileForm8962Monthly" />
                <Dependency path="/hasActive1095APolicyInDec" />
              </All>
            </When>
            <Then>
              <Round>
                <CollectionSum>
                  <Dependency path="/1095As/*/ptcMonthlyAptcPremiumDec" />
                </CollectionSum>
              </Round>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/totalPtcAmountAllowed">
      <Description>Total PTC amount allowed, used on Form 8962, Line 24</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Dependency path="/annualPtcAllowed" />
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/needsToFileForm8962Monthly" />
            </When>
            <Then>
              <Add>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForJan" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForJan" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForFeb" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForFeb" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForMar" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForMar" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForApr" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForApr" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForMay" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForMay" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForJun" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForJun" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForJul" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForJul" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForAug" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForAug" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForSep" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForSep" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForOct" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForOct" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForNov" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForNov" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyPtcAllowedForDec" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyPtcAllowedForDec" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
              </Add>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/totalAptcAmountTaken">
      <Description>Total APTC amount taken, used on Form 8962, Line 25</Description>
      <Export mef="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/ptcCanReportAnnualTotals" />
            </When>
            <Then>
              <Dependency path="/totalAnnualAptcAmount" />
            </Then>
          </Case>
          <Case>
            <When>
              <Dependency path="/needsToFileForm8962Monthly" />
            </When>
            <Then>
              <Add>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForJan" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForJan" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForFeb" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForFeb" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForMar" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForMar" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForApr" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForApr" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForMay" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForMay" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForJun" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForJun" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForJul" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForJul" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForAug" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForAug" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForSep" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForSep" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForOct" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForOct" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForNov" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForNov" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
                <Switch>
                  <Case>
                    <When>
                      <IsComplete>
                        <Dependency path="/monthlyAptcPremiumForDec" />
                      </IsComplete>
                    </When>
                    <Then>
                      <Dependency path="/monthlyAptcPremiumForDec" />
                    </Then>
                  </Case>
                  <Case>
                    <When>
                      <True />
                    </When>
                    <Then>
                      <Dollar>0</Dollar>
                    </Then>
                  </Case>
                </Switch>
              </Add>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/netPtcAmount">
      <Description>The net PTC amount</Description>
      <Derived>
        <Subtract>
          <Minuend>
            <Dependency path="/totalPtcAmountAllowed" />
          </Minuend>
          <Subtrahends>
            <Dependency path="/totalAptcAmountTaken" />
          </Subtrahends>
        </Subtract>
      </Derived>
    </Fact>

    <Fact path="/netPtcAmountIsZeroOrPositive">
      <Description>Helper fact to determine if PTC amount is zero or positive</Description>
      <Derived>
        <GreaterThanOrEqual>
          <Left>
            <Dependency path="/netPtcAmount" />
          </Left>
          <Right>
            <Dollar>0</Dollar>
          </Right>
        </GreaterThanOrEqual>
      </Derived>
    </Fact>

    <Fact path="/netPtcAmountIsNegative">
      <Description>Helper fact to determine if PTC amount is negative</Description>
      <Derived>
        <LessThan>
          <Left>
            <Dependency path="/netPtcAmount" />
          </Left>
          <Right>
            <Dollar>0</Dollar>
          </Right>
        </LessThan>
      </Derived>
    </Fact>

    <Fact path="/netPtcAmountWhenZeroOrPositive">
      <Description>net PTC amount when amount is zero or positive, used on Form 8962 Line 26</Description>
      <Export mef="true" downstreamFacts="true" />
      <ExportZero />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/netPtcAmountIsZeroOrPositive" />
            </When>
            <Then>
              <Dependency path="/netPtcAmount" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isReceivingPtc">
      <Description>The credit being received is positive</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <All>
          <Dependency path="/needsToFileForm8962" />  <!-- This might be redundant -->
          <IsComplete>
            <Dependency path="/netPtcAmountWhenZeroOrPositive" />
          </IsComplete>
          <NotEqual>
            <Left>
              <Dependency path="/netPtcAmountWhenZeroOrPositive" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </NotEqual>
        </All>
      </Derived>
    </Fact>

    <Fact path="/owesPtc">
      <Description>The TP owes PTC</Description>
      <Derived>
        <All>
          <Dependency path="/needsToFileForm8962" /> <!-- This might be redundant -->
          <GreaterThan>
            <Left>
              <Dependency path="/lesserOfNetPtcAmountAndRepaymentLimitation" />
            </Left>
            <Right>
              <Dollar>0</Dollar>
            </Right>
          </GreaterThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/netPtcAmountWhenNegative">
      <Description>net PTC amount when amount is negative, used on Form 8962 Line 27</Description>
      <Export mef="true" downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/netPtcAmountIsNegative" />
            </When>
            <Then>
              <Multiply>
                <Dependency path="/netPtcAmount" />
                <Int>-1</Int>
              </Multiply>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <!-- We could simply these and ptcRepaymentLimitation but chosing to be verbose to increase flexibility if the
    proportions don't stay the same -->
    <Fact path="/ptcRepaymentLimitationLessThan200PercentFplSingle">
      <Description>Repayment limitation based on lt 200% FPL (federal poverty limit) and single Rev Proc .07 Refundable
        Credit for Coverage Under a Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>375</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitationLessThan200PercentFplOther">
      <Description>Repayment limitation lt 200% FPL and not signle Rev Proc .07 Refundable Credit for Coverage Under a
        Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>750</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitationLessThan300PercentFplSingle">
      <Description>Repayment limitation based on lt 300% FPL and single Rev Proc .07 Refundable Credit for Coverage
        Under a Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>950</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitationLessThan300PercentFplOther">
      <Description>Repayment limitation lt 300% FPL and not signle Rev Proc .07 Refundable Credit for Coverage Under a
        Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>1900</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitationLessThan400PercentFplSingle">
      <Description>Repayment limitation based on lt 400% FPL and single Rev Proc .07 Refundable Credit for Coverage
        Under a Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>1575</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitationLessThan400PercentFplOther">
      <Description>Repayment limitation lt 400% FPL and not signle Rev Proc .07 Refundable Credit for Coverage Under a
        Qualified Health Plan  36B(f)(2)(B)</Description>
      <TaxYear>2024</TaxYear>
      <Derived>
        <Dollar>3150</Dollar>
      </Derived>
    </Fact>

    <Fact path="/ptcRepaymentLimitation">
      <Description>PTC repayment limitation, Line 28</Description>
      <Export mef="true" />
      <Derived>
        <Switch>
          <!-- Workaround to ensure this line is blank when tax family size is 0 -->
          <Case>
            <When>
              <Dependency path="/taxFamilySizeIsZero" />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <IsComplete>
                  <Dependency path="/netPtcAmountWhenNegative" />
                </IsComplete>
                <LessThan>
                  <Left>
                    <Dependency path="/householdIncomeAsPercent" />
                  </Left>
                  <Right>
                    <Int>200</Int>
                  </Right>
                </LessThan>
              </All>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Dependency module="filingStatus" path="/isFilingStatusSingle" />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan200PercentFplSingle" />
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan200PercentFplOther" />
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <IsComplete>
                  <Dependency path="/netPtcAmountWhenNegative" />
                </IsComplete>
                <LessThan>
                  <Left>
                    <Dependency path="/householdIncomeAsPercent" />
                  </Left>
                  <Right>
                    <Int>300</Int>
                  </Right>
                </LessThan>
              </All>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Dependency module="filingStatus" path="/isFilingStatusSingle" />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan300PercentFplSingle" />
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan300PercentFplOther" />
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <IsComplete>
                  <Dependency path="/netPtcAmountWhenNegative" />
                </IsComplete>
                <LessThan>
                  <Left>
                    <Dependency path="/householdIncomeAsPercent" />
                  </Left>
                  <Right>
                    <Int>400</Int>
                  </Right>
                </LessThan>
              </All>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <Dependency module="filingStatus" path="/isFilingStatusSingle" />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan400PercentFplSingle" />
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Dependency path="/ptcRepaymentLimitationLessThan400PercentFplOther" />
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <All>
                <IsComplete>
                  <Dependency path="/netPtcAmountWhenNegative" />
                </IsComplete>
                <GreaterThanOrEqual>
                  <Left>
                    <Dependency path="/householdIncomeAsPercent" />
                  </Left>
                  <Right>
                    <Int>400</Int>
                  </Right>
                </GreaterThanOrEqual>
              </All>
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/isRepaymentLimitationIsActive">
      <Description>When the repayment limitation is active</Description>
      <Derived>
        <All>
          <Equal>
            <Left>
              <Dependency path="/ptcRepaymentLimitation" />
            </Left>
            <Right>
              <Dependency path="/lesserOfNetPtcAmountAndRepaymentLimitation" />
            </Right>
          </Equal>
          <LessThan>
            <Left>
              <Dependency path="/ptcRepaymentLimitation" />
            </Left>
            <Right>
              <Dependency path="/netPtcAmountWhenNegative" />
            </Right>
          </LessThan>
        </All>
      </Derived>
    </Fact>

    <Fact path="/ptcAmountOwedDisplayedAsZero">
      <Description>/lesserOfNetPtcAmountAndRepaymentLimitation represents a PTC amount owed. Instead of displaying this
        amount as a negative number in the summary, display 0 to communicate that no positive credit is being given.</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="/lesserOfNetPtcAmountAndRepaymentLimitation" />
              </IsComplete>
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/lesserOfNetPtcAmountAndRepaymentLimitation">
      <Description>The lesser of the net PTC amount and the repayment limitation, used on Form 1040 Schedule 2, Line 1a
        and on Form 8962 Line 29</Description>
      <Export mef="true" downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <IsComplete>
                <Dependency path="/netPtcAmountWhenNegative" />
              </IsComplete>
            </When>
            <Then>
              <Switch>
                <Case>
                  <When>
                    <All>
                      <IsComplete>
                        <Dependency path="/ptcRepaymentLimitation" />
                      </IsComplete>
                      <NotEqual>
                        <Left>
                          <Dependency path="/ptcRepaymentLimitation" />
                        </Left>
                        <Right>
                          <Dollar>0</Dollar>
                        </Right>
                      </NotEqual>
                    </All>
                  </When>
                  <Then>
                    <LesserOf>
                      <Dependency path="/netPtcAmountWhenNegative" />
                      <Dependency path="/ptcRepaymentLimitation" />
                    </LesserOf>
                  </Then>
                </Case>
                <Case>
                  <When>
                    <True />
                  </When>
                  <Then>
                    <Dependency path="/netPtcAmountWhenNegative" />
                  </Then>
                </Case>
              </Switch>
            </Then>
          </Case>
          <Case>
            <When>
              <True />
            </When>
            <Then>
              <Dollar>0</Dollar>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/ptcHasZeroCoverageMonths">
      <Description>TP has zero coverage months across all 1095As, you should check if this is complete when using</Description>
      <Derived>
        <Switch>
          <Case>
            <When>
              <All>
                <Dependency path="/applicableTaxPayerOrHasAptc" />
                <GreaterThan>
                  <Left>
                    <CollectionSize>
                      <Dependency path="/1095As" />
                    </CollectionSize>
                  </Left>
                  <Right>
                    <Int>0</Int>
                  </Right>
                </GreaterThan>
              </All>
            </When>
            <Then>
              <Equal>
                <Left>
                  <CollectionSize>
                    <Dependency path="/1095As" />
                  </CollectionSize>
                </Left>
                <Right>
                  <CollectionSize>
                    <Filter path="/1095As">
                      <Dependency path="hasZeroCoverageMonths" />
                    </Filter>
                  </CollectionSize>
                </Right>
              </Equal>
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/potentiallyEligibleForAltCalcBecauseMarriedThisYear">
      <Description>May potentially qualify for alternative calculations for excess APTC based on being married this year</Description>
      <Derived>
        <All>
          <Dependency path="/hasAdvancedPtc" />
          <IsComplete>
            <Dependency path="/netPtcAmountWhenNegative" />
          </IsComplete>
          <Dependency module="filers" path="/isMarried" />
          <Dependency module="filingStatus" path="/isFilingStatusMFJ" />
        </All>
      </Derived>
    </Fact>

    <Fact path="/writableWantsToUseAltCalculations">
      <Description>(writable)Whether the TP wants to use the alt calculations for excess APTC</Description>
      <Writable>
        <Boolean />
      </Writable>
    </Fact>

    <Fact path="/wantsToUseAltCalculations">
      <Description>Whether the TP wants to use the alt calculations for excess APTC</Description>
      <Export downstreamFacts="true" />
      <Derived>
        <Switch>
          <Case>
            <When>
              <Dependency path="/potentiallyEligibleForAltCalcBecauseMarriedThisYear" />
            </When>
            <Then>
              <Dependency path="/writableWantsToUseAltCalculations" />
            </Then>
          </Case>
        </Switch>
      </Derived>
    </Fact>

    <Fact path="/noQualifiedPlanAndNotADependentTaxPayer">
      <Description>The TP is not have a qualifying plan and is not a non MFJ dependent TP</Description>
      <Derived>
        <All>
          <Not>
            <Dependency path="/hasPtcQualifyingPlan" />
          </Not>
          <Not>
            <Dependency module="filers"
              path="/notMfjAndPrimaryFilerCouldBeDependentAndClaimerIsRequiredToFileOrFilingForCredits" />
          </Not>
        </All>
      </Derived>
    </Fact>

  </Facts>
</FactDictionaryModule>
